@page "/endpoints"
@inject HttpClient Client
@inject IToastService toastService

<div class="row">
    <div class="col-lg-12 col-md-12 col-xs-12">
        <a class="btn btn-sm btn-success" href="/endpoints/add">
            <span class="fa fa-plus"></span> Add endpoint
        </a>
        <CascadingValue Value="@SelectedItems">
            <TableWithPagination TItem="DockerEndpointDto" ControllerName="endpoint" Context="endpoint" OnItemSelected="ItemSelectedHandler">
                <TableHeader>
                    <th>Name</th>
                    <th>Endpoint</th>
                    <th>Type</th>
                </TableHeader>
                <TableRow>
                    <td>@endpoint.Name</td>
                    <td>@endpoint.Uri</td>
                    <td>@endpoint.Type</td>
                </TableRow>
            </TableWithPagination>
        </CascadingValue>
        @foreach (var item in SelectedItems)
        {
            @item.Name<br />
        }
    </div>
</div>

@code{
    public List<DockerEndpointDto> SelectedItems { get; set; } = new List<DockerEndpointDto>();

    public void ItemSelectedHandler(List<DockerEndpointDto> items)
    {
        SelectedItems = items;
    }
}