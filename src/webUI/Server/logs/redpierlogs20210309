2021-03-09 12:19:21.723 +03:00 [INF] Starting host...
2021-03-09 12:19:34.077 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 12:19:34.369 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 12:19:34.371 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 12:19:34.372 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 12:19:34.372 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 12:19:34.373 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 12:19:34.373 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 12:19:34.726 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 12:19:34.727 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 12:19:34.728 +03:00 [INF] Hosting environment: Development
2021-03-09 12:19:34.729 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 12:19:35.729 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 12:19:35.731 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 12:19:35.732 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 12:19:35.732 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 12:19:35.733 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 12:19:35.734 +03:00 [DBG] Error Url: /Home
2021-03-09 12:19:35.734 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 12:19:37.412 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 12:19:37.416 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 12:19:37.417 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 12:19:37.419 +03:00 [DBG] Start discovery request
2021-03-09 12:19:37.462 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 12:19:37.467 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 12:19:37.468 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 12:19:37.470 +03:00 [DBG] Start authorize request
2021-03-09 12:19:37.476 +03:00 [DBG] No user present in authorize request
2021-03-09 12:19:37.522 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 12:19:37.532 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:19:37.542 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 12:19:37.570 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 12:19:37.583 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"b95166eec07f4980b31afff046bd2bb5","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"b95166eec07f4980b31afff046bd2bb5","code_challenge":"18XQKfaLSYoj36waZVdLJPJS2XpItvSlItWPEp9s5Cg","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 12:19:37.604 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 12:19:37.605 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 12:19:37.607 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"b95166eec07f4980b31afff046bd2bb5","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"b95166eec07f4980b31afff046bd2bb5","code_challenge":"18XQKfaLSYoj36waZVdLJPJS2XpItvSlItWPEp9s5Cg","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 12:19:37.630 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72RHQAPRPI:0000001F","TimeStamp":"2021-03-09T09:19:37.0000000Z","ProcessId":21052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 12:19:37.817 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 12:19:37.823 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 12:19:37.824 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 12:19:37.825 +03:00 [DBG] Start authorize request
2021-03-09 12:19:37.826 +03:00 [DBG] No user present in authorize request
2021-03-09 12:19:37.827 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 12:19:37.828 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:19:37.830 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 12:19:37.831 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 12:19:37.833 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"826cddbcbc3b4113ae9e2b35cc4c5f1c","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"826cddbcbc3b4113ae9e2b35cc4c5f1c","code_challenge":"UY3fS-nkM_1LiorRcvwIiXESCnvFpGq5Lm4EVmp9Otw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 12:19:37.844 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 12:19:37.845 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 12:19:37.846 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"826cddbcbc3b4113ae9e2b35cc4c5f1c","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"826cddbcbc3b4113ae9e2b35cc4c5f1c","code_challenge":"UY3fS-nkM_1LiorRcvwIiXESCnvFpGq5Lm4EVmp9Otw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 12:19:37.857 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72RHQAPRPI:00000027","TimeStamp":"2021-03-09T09:19:37.0000000Z","ProcessId":21052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 12:19:37.923 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 12:19:37.941 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 12:19:37.942 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 12:19:37.943 +03:00 [DBG] Start authorize request
2021-03-09 12:19:37.944 +03:00 [DBG] No user present in authorize request
2021-03-09 12:19:37.944 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 12:19:37.945 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:19:37.947 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 12:19:37.949 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 12:19:37.950 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"c367487145cd4d5db13811568db99c0b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"c367487145cd4d5db13811568db99c0b","code_challenge":"MuF5YkV_YbqG7z8d0I040yFsl0MsHA7embqsMJS3Q7g","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 12:19:37.955 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 12:19:38.009 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-09 12:19:47.102 +03:00 [DBG] Augmenting SignInContext
2021-03-09 12:19:47.104 +03:00 [DBG] Adding idp claim with value: local
2021-03-09 12:19:47.105 +03:00 [DBG] Adding auth_time claim with value: 1615281587
2021-03-09 12:19:47.112 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-09 12:19:47.113 +03:00 [INF] User logged in.
2021-03-09 12:19:47.129 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-09 12:19:47.130 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-09 12:19:47.133 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-09 12:19:47.137 +03:00 [DBG] Start authorize callback request
2021-03-09 12:19:47.140 +03:00 [DBG] User in authorize request: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 12:19:47.141 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 12:19:47.143 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:19:47.146 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 12:19:47.148 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 12:19:47.154 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"c367487145cd4d5db13811568db99c0b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"D7F649F10A747510E9CDE1E78C741253","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"c367487145cd4d5db13811568db99c0b","code_challenge":"MuF5YkV_YbqG7z8d0I040yFsl0MsHA7embqsMJS3Q7g","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 12:19:47.831 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-09 12:19:47.833 +03:00 [DBG] Creating Authorization Code Flow response.
2021-03-09 12:19:48.511 +03:00 [DBG] 0fyM675Q7KTQznM9z5LnFL+dmomT1Y1627iB4SHP8kY= not found in database
2021-03-09 12:19:49.335 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****CE3B","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72RHQAPRPI:0000003B","TimeStamp":"2021-03-09T09:19:49.0000000Z","ProcessId":21052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 12:19:49.344 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ClientId":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","State":"c367487145cd4d5db13811568db99c0b","Scope":"Redpier.WebUI.ServerAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-09 12:19:49.348 +03:00 [DBG] Augmenting SignInContext
2021-03-09 12:19:49.349 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-09 12:19:50.395 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 12:19:50.396 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 12:19:50.397 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 12:19:50.399 +03:00 [DBG] Start discovery request
2021-03-09 12:19:50.415 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 12:19:50.420 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 12:19:50.421 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 12:19:50.425 +03:00 [DBG] Start token request.
2021-03-09 12:19:50.427 +03:00 [DBG] Start client validation
2021-03-09 12:19:50.431 +03:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 12:19:50.434 +03:00 [DBG] Start parsing for secret in post body
2021-03-09 12:19:50.435 +03:00 [DBG] client id without secret found
2021-03-09 12:19:50.435 +03:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 12:19:50.436 +03:00 [DBG] Secret id found: Redpier.WebUI.Client
2021-03-09 12:19:50.436 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:19:50.437 +03:00 [DBG] Public Client - skipping secret validation success
2021-03-09 12:19:50.437 +03:00 [DBG] Client validation success
2021-03-09 12:19:50.439 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM72RHQAPRPI:0000004B","TimeStamp":"2021-03-09T09:19:50.0000000Z","ProcessId":21052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-09 12:19:50.443 +03:00 [DBG] Start token request validation
2021-03-09 12:19:50.446 +03:00 [DBG] Start validation of authorization code token request
2021-03-09 12:19:51.047 +03:00 [DBG] 0fyM675Q7KTQznM9z5LnFL+dmomT1Y1627iB4SHP8kY= found in database: true
2021-03-09 12:19:51.697 +03:00 [DBG] removing 0fyM675Q7KTQznM9z5LnFL+dmomT1Y1627iB4SHP8kY= persisted grant from database
2021-03-09 12:19:52.309 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-09 12:19:52.913 +03:00 [DBG] Validation of authorization code token request success
2021-03-09 12:19:52.915 +03:00 [INF] Token request validation success, {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"F6ABDE3E7A42EF2B3F1BBB6933E01561996B382B82B5DA141593105B7F2CCE3B","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Redpier.WebUI.Client","code":"F6ABDE3E7A42EF2B3F1BBB6933E01561996B382B82B5DA141593105B7F2CCE3B","redirect_uri":"https://localhost:5000/authentication/login-callback","code_verifier":"ef82ea180b774a8e88227cda304314a40092bccd41ed4e2988a525a2e461e3cb4f00fcc6f99843f284f74ea00e334272","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-09 12:19:52.927 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:19:52.938 +03:00 [DBG] Getting claims for access token for client: Redpier.WebUI.Client
2021-03-09 12:19:52.939 +03:00 [DBG] Getting claims for access token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 12:19:55.408 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:19:55.414 +03:00 [DBG] Getting claims for identity token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6 and client: Redpier.WebUI.Client
2021-03-09 12:19:55.415 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-09 12:19:55.418 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****QROQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Y_WQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72RHQAPRPI:0000004B","TimeStamp":"2021-03-09T09:19:55.0000000Z","ProcessId":21052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 12:19:55.422 +03:00 [DBG] Token request success.
2021-03-09 12:19:55.505 +03:00 [INF] Successfully validated the token.
2021-03-09 12:19:55.506 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-09 12:19:55.508 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-09 12:19:55.511 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-09 12:19:55.514 +03:00 [DBG] Start userinfo request
2021-03-09 12:19:55.516 +03:00 [DBG] Bearer token found in header
2021-03-09 12:19:55.523 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:19:55.527 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:19:56.099 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 12:19:56.102 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"4CBDDF8EA6FB0899286C49A830E965E2","Claims":{"nbf":1615281595,"exp":1615285195,"iss":"https://localhost:5000","aud":"Redpier.WebUI.ServerAPI","client_id":"Redpier.WebUI.Client","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615281587,"idp":"local","jti":"4CBDDF8EA6FB0899286C49A830E965E2","sid":"D7F649F10A747510E9CDE1E78C741253","iat":1615281595,"scope":["Redpier.WebUI.ServerAPI","openid","profile"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 12:19:56.112 +03:00 [DBG] Creating userinfo response
2021-03-09 12:19:56.113 +03:00 [DBG] Scopes in access token: Redpier.WebUI.ServerAPI openid profile
2021-03-09 12:19:56.116 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2021-03-09 12:19:58.440 +03:00 [INF] Profile service returned the following claim types: sub preferred_username name
2021-03-09 12:19:58.441 +03:00 [DBG] End userinfo request
2021-03-09 12:19:58.457 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-09 12:19:58.458 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-09 12:19:58.458 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-09 12:19:58.460 +03:00 [DBG] Rendering check session result
2021-03-09 12:20:01.024 +03:00 [INF] Successfully validated the token.
2021-03-09 12:20:01.461 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.TimeoutException: The operation has timed out.
   at System.IO.Pipes.NamedPipeClientStream.ConnectInternal(Int32 timeout, CancellationToken cancellationToken, Int32 startTime)
   at System.IO.Pipes.NamedPipeClientStream.<>c__DisplayClass20_0.<ConnectAsync>b__0()
   at System.Threading.Tasks.Task.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Docker.DotNet.DockerClient.<>c__DisplayClass6_0.<<-ctor>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.Net.Http.Client.ManagedHandler.ProcessRequestAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Net.Http.Client.ManagedHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.SendAsyncCore(HttpRequestMessage request, HttpCompletionOption completionOption, Boolean async, Boolean emitTelemetryStartStop, CancellationToken cancellationToken)
   at Docker.DotNet.DockerClient.PrivateMakeRequestAsync(TimeSpan timeout, HttpCompletionOption completionOption, HttpMethod method, String path, IQueryString queryString, IDictionary`2 headers, IRequestContent data, CancellationToken cancellationToken)
   at Docker.DotNet.DockerClient.PrivateMakeRequestAsync(TimeSpan timeout, HttpCompletionOption completionOption, HttpMethod method, String path, IQueryString queryString, IDictionary`2 headers, IRequestContent data, CancellationToken cancellationToken)
   at Docker.DotNet.DockerClient.MakeRequestAsync(IEnumerable`1 errorHandlers, HttpMethod method, String path, IQueryString queryString, IRequestContent body, IDictionary`2 headers, TimeSpan timeout, CancellationToken token)
   at Docker.DotNet.ContainerOperations.ListContainersAsync(ContainersListParameters parameters, CancellationToken cancellationToken)
   at Redpier.Application.Queries.Containers.ListContainersQueryHandler.Handle(ListContainersQuery request, CancellationToken cancellationToken) in C:\Users\Furkan\source\repos\redpier\src\Redpier.Application\Queries\Containers\ListContainersQuery.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at Redpier.WebUI.Server.Controllers.ContainerController.GetContainers(ListContainersQuery query) in C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server\Controllers\ContainerController.cs:line 23
   at lambda_method408(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Builder.Extensions.MapWhenMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Builder.Extensions.MapWhenMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Builder.Extensions.MapMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-03-09 12:20:01.957 +03:00 [INF] Successfully validated the token.
2021-03-09 12:20:02.192 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.TimeoutException: The operation has timed out.
   at System.IO.Pipes.NamedPipeClientStream.ConnectInternal(Int32 timeout, CancellationToken cancellationToken, Int32 startTime)
   at System.IO.Pipes.NamedPipeClientStream.<>c__DisplayClass20_0.<ConnectAsync>b__0()
   at System.Threading.Tasks.Task.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Docker.DotNet.DockerClient.<>c__DisplayClass6_0.<<-ctor>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.Net.Http.Client.ManagedHandler.ProcessRequestAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Net.Http.Client.ManagedHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.SendAsyncCore(HttpRequestMessage request, HttpCompletionOption completionOption, Boolean async, Boolean emitTelemetryStartStop, CancellationToken cancellationToken)
   at Docker.DotNet.DockerClient.PrivateMakeRequestAsync(TimeSpan timeout, HttpCompletionOption completionOption, HttpMethod method, String path, IQueryString queryString, IDictionary`2 headers, IRequestContent data, CancellationToken cancellationToken)
   at Docker.DotNet.DockerClient.PrivateMakeRequestAsync(TimeSpan timeout, HttpCompletionOption completionOption, HttpMethod method, String path, IQueryString queryString, IDictionary`2 headers, IRequestContent data, CancellationToken cancellationToken)
   at Docker.DotNet.DockerClient.MakeRequestAsync(IEnumerable`1 errorHandlers, HttpMethod method, String path, IQueryString queryString, IRequestContent body, IDictionary`2 headers, TimeSpan timeout, CancellationToken token)
   at Docker.DotNet.ContainerOperations.ListContainersAsync(ContainersListParameters parameters, CancellationToken cancellationToken)
   at Redpier.Application.Queries.Containers.ListContainersQueryHandler.Handle(ListContainersQuery request, CancellationToken cancellationToken) in C:\Users\Furkan\source\repos\redpier\src\Redpier.Application\Queries\Containers\ListContainersQuery.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at Redpier.WebUI.Server.Controllers.ContainerController.GetContainers(ListContainersQuery query) in C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server\Controllers\ContainerController.cs:line 23
   at lambda_method408(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Builder.Extensions.MapWhenMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Builder.Extensions.MapWhenMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Builder.Extensions.MapMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-03-09 12:21:01.071 +03:00 [INF] Successfully validated the token.
2021-03-09 12:21:02.077 +03:00 [INF] Successfully validated the token.
2021-03-09 12:21:03.072 +03:00 [INF] Successfully validated the token.
2021-03-09 12:21:03.258 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:11.807 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:12.803 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:13.806 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:14.171 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:14.803 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:15.791 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:15.815 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:16.802 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:17.816 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:18.805 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:19.802 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:20.803 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:21.773 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:22.460 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:23.466 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:24.465 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:24.605 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:25.724 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:26.515 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:26.836 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:27.204 +03:00 [INF] Successfully validated the token.
2021-03-09 12:23:27.584 +03:00 [INF] Successfully validated the token.
2021-03-09 12:59:15.632 +03:00 [INF] Starting host...
2021-03-09 12:59:20.553 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 12:59:20.741 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 12:59:20.742 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 12:59:20.742 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 12:59:20.743 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 12:59:20.743 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 12:59:20.743 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 12:59:20.921 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 12:59:20.921 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 12:59:20.922 +03:00 [INF] Hosting environment: Development
2021-03-09 12:59:20.925 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 12:59:22.948 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 12:59:22.949 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 12:59:22.953 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 12:59:22.954 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 12:59:22.954 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 12:59:22.955 +03:00 [DBG] Error Url: /Home
2021-03-09 12:59:22.956 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 12:59:23.055 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 12:59:23.060 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 12:59:23.062 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 12:59:23.064 +03:00 [DBG] Start discovery request
2021-03-09 12:59:23.104 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 12:59:23.109 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 12:59:23.110 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 12:59:23.114 +03:00 [DBG] Start authorize request
2021-03-09 12:59:23.117 +03:00 [DBG] No user present in authorize request
2021-03-09 12:59:23.155 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 12:59:23.164 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:59:23.174 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 12:59:23.195 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 12:59:23.206 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"16dcdcd923ce4d749326553780078234","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"16dcdcd923ce4d749326553780078234","code_challenge":"U7DZ28ZZwaxtAJMZOf8XcG_VVrNgVU0qgKK3pLR_e6g","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 12:59:23.223 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 12:59:23.223 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 12:59:23.225 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"16dcdcd923ce4d749326553780078234","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"16dcdcd923ce4d749326553780078234","code_challenge":"U7DZ28ZZwaxtAJMZOf8XcG_VVrNgVU0qgKK3pLR_e6g","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 12:59:23.241 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72S81F3NPS:00000011","TimeStamp":"2021-03-09T09:59:23.0000000Z","ProcessId":12920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 12:59:23.419 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 12:59:23.421 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 12:59:23.423 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 12:59:23.424 +03:00 [DBG] Start authorize request
2021-03-09 12:59:23.425 +03:00 [DBG] No user present in authorize request
2021-03-09 12:59:23.426 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 12:59:23.427 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:59:23.428 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 12:59:23.429 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 12:59:23.430 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"7be0c0fe24f749dc842745e760803838","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"7be0c0fe24f749dc842745e760803838","code_challenge":"PEirC8_SmbdBx1ksOMIeGB_nY32EZAcGpmk_R9auzSY","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 12:59:23.440 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 12:59:23.440 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 12:59:23.442 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"7be0c0fe24f749dc842745e760803838","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"7be0c0fe24f749dc842745e760803838","code_challenge":"PEirC8_SmbdBx1ksOMIeGB_nY32EZAcGpmk_R9auzSY","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 12:59:23.454 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72S81F3NPS:00000019","TimeStamp":"2021-03-09T09:59:23.0000000Z","ProcessId":12920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 12:59:23.529 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 12:59:23.548 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 12:59:23.549 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 12:59:23.550 +03:00 [DBG] Start authorize request
2021-03-09 12:59:23.551 +03:00 [DBG] No user present in authorize request
2021-03-09 12:59:23.552 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 12:59:23.553 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:59:23.556 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 12:59:23.556 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 12:59:23.557 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"d185b065d36a463f95bb3291a769902a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"d185b065d36a463f95bb3291a769902a","code_challenge":"BlROJ0UAh-Jnon_o4nWxi8OJdMIEWOD4IN8aMsA8wiU","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 12:59:23.562 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 12:59:23.601 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-09 12:59:31.380 +03:00 [DBG] Augmenting SignInContext
2021-03-09 12:59:31.382 +03:00 [DBG] Adding idp claim with value: local
2021-03-09 12:59:31.382 +03:00 [DBG] Adding auth_time claim with value: 1615283971
2021-03-09 12:59:31.388 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-09 12:59:31.389 +03:00 [INF] User logged in.
2021-03-09 12:59:31.400 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-09 12:59:31.402 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-09 12:59:31.403 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-09 12:59:31.406 +03:00 [DBG] Start authorize callback request
2021-03-09 12:59:31.408 +03:00 [DBG] User in authorize request: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 12:59:31.409 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 12:59:31.409 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:59:31.411 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 12:59:31.411 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 12:59:31.415 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"d185b065d36a463f95bb3291a769902a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"649BF16998D2747AB5598234D996385E","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"d185b065d36a463f95bb3291a769902a","code_challenge":"BlROJ0UAh-Jnon_o4nWxi8OJdMIEWOD4IN8aMsA8wiU","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 12:59:32.194 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-09 12:59:32.196 +03:00 [DBG] Creating Authorization Code Flow response.
2021-03-09 12:59:32.833 +03:00 [DBG] wke52cGAC/DD1coJJ5q1jFGG28OJNPAqtkQLklUSYdw= not found in database
2021-03-09 12:59:33.660 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****49A5","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72S81F3NPS:00000027","TimeStamp":"2021-03-09T09:59:33.0000000Z","ProcessId":12920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 12:59:33.667 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ClientId":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","State":"d185b065d36a463f95bb3291a769902a","Scope":"Redpier.WebUI.ServerAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-09 12:59:33.672 +03:00 [DBG] Augmenting SignInContext
2021-03-09 12:59:33.674 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-09 12:59:34.620 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 12:59:34.622 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 12:59:34.624 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 12:59:34.626 +03:00 [DBG] Start discovery request
2021-03-09 12:59:34.640 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 12:59:34.642 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 12:59:34.643 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 12:59:34.648 +03:00 [DBG] Start token request.
2021-03-09 12:59:34.650 +03:00 [DBG] Start client validation
2021-03-09 12:59:34.652 +03:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 12:59:34.654 +03:00 [DBG] Start parsing for secret in post body
2021-03-09 12:59:34.656 +03:00 [DBG] client id without secret found
2021-03-09 12:59:34.657 +03:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 12:59:34.657 +03:00 [DBG] Secret id found: Redpier.WebUI.Client
2021-03-09 12:59:34.659 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:59:34.661 +03:00 [DBG] Public Client - skipping secret validation success
2021-03-09 12:59:34.661 +03:00 [DBG] Client validation success
2021-03-09 12:59:34.662 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM72S81F3NPS:00000035","TimeStamp":"2021-03-09T09:59:34.0000000Z","ProcessId":12920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-09 12:59:34.667 +03:00 [DBG] Start token request validation
2021-03-09 12:59:34.670 +03:00 [DBG] Start validation of authorization code token request
2021-03-09 12:59:35.261 +03:00 [DBG] wke52cGAC/DD1coJJ5q1jFGG28OJNPAqtkQLklUSYdw= found in database: true
2021-03-09 12:59:35.860 +03:00 [DBG] removing wke52cGAC/DD1coJJ5q1jFGG28OJNPAqtkQLklUSYdw= persisted grant from database
2021-03-09 12:59:36.471 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-09 12:59:37.048 +03:00 [DBG] Validation of authorization code token request success
2021-03-09 12:59:37.050 +03:00 [INF] Token request validation success, {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"6C08299E8F4F7BB9973DB8FB7354A0EC1C671CDA7194DB054F903F807AF149A5","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Redpier.WebUI.Client","code":"6C08299E8F4F7BB9973DB8FB7354A0EC1C671CDA7194DB054F903F807AF149A5","redirect_uri":"https://localhost:5000/authentication/login-callback","code_verifier":"793ddca6a646441eb27896d6207f8a90391d9f6987984c23982172bd535adba462757514f3a745db95958f5360666585","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-09 12:59:37.060 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:59:37.069 +03:00 [DBG] Getting claims for access token for client: Redpier.WebUI.Client
2021-03-09 12:59:37.070 +03:00 [DBG] Getting claims for access token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 12:59:39.450 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:59:39.456 +03:00 [DBG] Getting claims for identity token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6 and client: Redpier.WebUI.Client
2021-03-09 12:59:39.457 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-09 12:59:39.462 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****oLEg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****dk3g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72S81F3NPS:00000035","TimeStamp":"2021-03-09T09:59:39.0000000Z","ProcessId":12920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 12:59:39.469 +03:00 [DBG] Token request success.
2021-03-09 12:59:39.543 +03:00 [INF] Successfully validated the token.
2021-03-09 12:59:39.545 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-09 12:59:39.549 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-09 12:59:39.551 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-09 12:59:39.554 +03:00 [DBG] Start userinfo request
2021-03-09 12:59:39.557 +03:00 [DBG] Bearer token found in header
2021-03-09 12:59:39.566 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:59:39.568 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 12:59:40.133 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 12:59:40.135 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"6317385ECD2FBA684EE6F2E8C9A12C66","Claims":{"nbf":1615283979,"exp":1615287579,"iss":"https://localhost:5000","aud":"Redpier.WebUI.ServerAPI","client_id":"Redpier.WebUI.Client","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615283971,"idp":"local","jti":"6317385ECD2FBA684EE6F2E8C9A12C66","sid":"649BF16998D2747AB5598234D996385E","iat":1615283979,"scope":["Redpier.WebUI.ServerAPI","openid","profile"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 12:59:40.149 +03:00 [DBG] Creating userinfo response
2021-03-09 12:59:40.150 +03:00 [DBG] Scopes in access token: Redpier.WebUI.ServerAPI openid profile
2021-03-09 12:59:40.154 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2021-03-09 12:59:42.517 +03:00 [INF] Profile service returned the following claim types: sub preferred_username name
2021-03-09 12:59:42.518 +03:00 [DBG] End userinfo request
2021-03-09 12:59:42.536 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-09 12:59:42.536 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-09 12:59:42.537 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-09 12:59:42.541 +03:00 [DBG] Rendering check session result
2021-03-09 12:59:45.981 +03:00 [INF] Application is shutting down...
2021-03-09 13:00:19.166 +03:00 [INF] Starting host...
2021-03-09 13:00:24.488 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 13:00:24.645 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 13:00:24.646 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 13:00:24.646 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 13:00:24.646 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 13:00:24.647 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 13:00:24.647 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 13:00:24.782 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 13:00:24.783 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 13:00:24.784 +03:00 [INF] Hosting environment: Development
2021-03-09 13:00:24.785 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 13:00:26.823 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 13:00:26.824 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 13:00:26.826 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 13:00:26.827 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 13:00:26.828 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 13:00:26.829 +03:00 [DBG] Error Url: /Home
2021-03-09 13:00:26.830 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 13:00:26.990 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 13:00:26.994 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 13:00:26.995 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 13:00:26.998 +03:00 [DBG] Start discovery request
2021-03-09 13:00:27.060 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 13:00:27.065 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 13:00:27.067 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 13:00:27.069 +03:00 [DBG] Start authorize request
2021-03-09 13:00:27.075 +03:00 [DBG] User in authorize request: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 13:00:27.078 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 13:00:27.093 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:00:27.106 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 13:00:27.126 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 13:00:27.141 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"401762c29dac4e42ad352eea4c59ab14","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"649BF16998D2747AB5598234D996385E","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"401762c29dac4e42ad352eea4c59ab14","code_challenge":"RPmVyomYcQk-JqAFe_-HSZBunk3KQsMWT9gUOyeYwVw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 13:00:27.982 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-09 13:00:27.985 +03:00 [DBG] Creating Authorization Code Flow response.
2021-03-09 13:00:28.673 +03:00 [DBG] 0DBt40dTFmyOcNn0L1YZpX+dpevRP2FtCZdm12OnKXQ= not found in database
2021-03-09 13:00:29.631 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****76A4","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72S8KED9S1:0000000B","TimeStamp":"2021-03-09T10:00:29.0000000Z","ProcessId":17556,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 13:00:29.639 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ClientId":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","State":"401762c29dac4e42ad352eea4c59ab14","Scope":"Redpier.WebUI.ServerAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-09 13:00:29.748 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 13:00:29.752 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 13:00:29.753 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 13:00:29.757 +03:00 [DBG] Start token request.
2021-03-09 13:00:29.760 +03:00 [DBG] Start client validation
2021-03-09 13:00:29.764 +03:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 13:00:29.766 +03:00 [DBG] Start parsing for secret in post body
2021-03-09 13:00:29.770 +03:00 [DBG] client id without secret found
2021-03-09 13:00:29.772 +03:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 13:00:29.773 +03:00 [DBG] Secret id found: Redpier.WebUI.Client
2021-03-09 13:00:29.774 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:00:29.775 +03:00 [DBG] Public Client - skipping secret validation success
2021-03-09 13:00:29.776 +03:00 [DBG] Client validation success
2021-03-09 13:00:29.778 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM72S8KED9S1:00000011","TimeStamp":"2021-03-09T10:00:29.0000000Z","ProcessId":17556,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-09 13:00:29.784 +03:00 [DBG] Start token request validation
2021-03-09 13:00:29.788 +03:00 [DBG] Start validation of authorization code token request
2021-03-09 13:00:30.539 +03:00 [DBG] 0DBt40dTFmyOcNn0L1YZpX+dpevRP2FtCZdm12OnKXQ= found in database: true
2021-03-09 13:00:31.274 +03:00 [DBG] removing 0DBt40dTFmyOcNn0L1YZpX+dpevRP2FtCZdm12OnKXQ= persisted grant from database
2021-03-09 13:00:31.879 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-09 13:00:32.486 +03:00 [DBG] Validation of authorization code token request success
2021-03-09 13:00:32.488 +03:00 [INF] Token request validation success, {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"C4F92D61E4734C73C1E518E7737E1656C3679FB66991F6C9E7B7492AD9F276A4","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Redpier.WebUI.Client","code":"C4F92D61E4734C73C1E518E7737E1656C3679FB66991F6C9E7B7492AD9F276A4","redirect_uri":"https://localhost:5000/authentication/login-callback","code_verifier":"91a5ece1a84141f9bb335d8923aa6db7f0bb33bb2874469698c5cad0585cb7d7cb8c1c4e7ff64e76a5aa946940a959ae","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-09 13:00:32.498 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:00:32.510 +03:00 [DBG] Getting claims for access token for client: Redpier.WebUI.Client
2021-03-09 13:00:32.511 +03:00 [DBG] Getting claims for access token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 13:00:35.403 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:00:35.414 +03:00 [DBG] Getting claims for identity token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6 and client: Redpier.WebUI.Client
2021-03-09 13:00:35.415 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-09 13:00:35.419 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****nUqw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****nHBQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72S8KED9S1:00000011","TimeStamp":"2021-03-09T10:00:35.0000000Z","ProcessId":17556,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 13:00:35.424 +03:00 [DBG] Token request success.
2021-03-09 13:00:35.514 +03:00 [INF] Successfully validated the token.
2021-03-09 13:00:35.515 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-09 13:00:35.517 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-09 13:00:35.518 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-09 13:00:35.521 +03:00 [DBG] Start userinfo request
2021-03-09 13:00:35.523 +03:00 [DBG] Bearer token found in header
2021-03-09 13:00:35.534 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:00:35.543 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:00:36.223 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 13:00:36.225 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"206F1E5D45BD7C19AE184BBB717CDF4B","Claims":{"nbf":1615284035,"exp":1615287635,"iss":"https://localhost:5000","aud":"Redpier.WebUI.ServerAPI","client_id":"Redpier.WebUI.Client","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615283971,"idp":"local","jti":"206F1E5D45BD7C19AE184BBB717CDF4B","sid":"649BF16998D2747AB5598234D996385E","iat":1615284035,"scope":["Redpier.WebUI.ServerAPI","openid","profile"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 13:00:36.235 +03:00 [DBG] Creating userinfo response
2021-03-09 13:00:36.237 +03:00 [DBG] Scopes in access token: Redpier.WebUI.ServerAPI openid profile
2021-03-09 13:00:36.239 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2021-03-09 13:00:38.775 +03:00 [INF] Profile service returned the following claim types: sub preferred_username name
2021-03-09 13:00:38.780 +03:00 [DBG] End userinfo request
2021-03-09 13:00:38.793 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-09 13:00:38.795 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-09 13:00:38.795 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-09 13:00:38.797 +03:00 [DBG] Rendering check session result
2021-03-09 13:11:06.734 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:07.660 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:08.679 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:09.664 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:10.664 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:11.661 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:12.669 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:13.655 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:14.668 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:15.672 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:16.670 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:17.660 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:17.945 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:18.417 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:18.668 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:19.666 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:20.660 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:21.656 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:22.285 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:38.720 +03:00 [DBG] Request path /connect/endsession matched to endpoint type EndSession
2021-03-09 13:11:38.722 +03:00 [DBG] Endpoint enabled: EndSession, successfully created handler: Microsoft.AspNetCore.ApiAuthorization.IdentityServer.AutoRedirectEndSessionEndpoint
2021-03-09 13:11:38.724 +03:00 [INF] Invoking IdentityServer endpoint: Microsoft.AspNetCore.ApiAuthorization.IdentityServer.AutoRedirectEndSessionEndpoint for /connect/endsession
2021-03-09 13:11:38.731 +03:00 [DBG] Start end session request validation
2021-03-09 13:11:38.733 +03:00 [DBG] Start identity token validation
2021-03-09 13:11:38.734 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:11:38.738 +03:00 [DBG] Client found: Redpier.WebUI.Client / Redpier.WebUI.Client
2021-03-09 13:11:38.740 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 13:11:38.742 +03:00 [DBG] Token validation success
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1615284035,"exp":1615284335,"iss":"https://localhost:5000","aud":"Redpier.WebUI.Client","iat":1615284035,"at_hash":"virlHNR7BMZCKp_aZWbGkA","s_hash":"xCe2nYQ1TKV9G8tgbVscdA","sid":"649BF16998D2747AB5598234D996385E","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615283971,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 13:11:38.755 +03:00 [INF] End session request validation success
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","PostLogOutUri":"https://localhost:5000/authentication/logout-callback","State":"e0bfd3999ec247cebc2e002249f6a24c","Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:5000/authentication/logout-callback","state":"e0bfd3999ec247cebc2e002249f6a24c"},"$type":"EndSessionRequestValidationLog"}
2021-03-09 13:11:38.771 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-09 13:11:38.773 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2021-03-09 13:11:38.780 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:11:38.783 +03:00 [DBG] No client back-channel logout URLs
2021-03-09 13:11:39.784 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 13:11:39.787 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 13:11:39.788 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 13:11:39.790 +03:00 [DBG] Start discovery request
2021-03-09 13:11:39.804 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 13:11:39.806 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 13:11:39.807 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 13:11:39.808 +03:00 [DBG] Start authorize request
2021-03-09 13:11:39.809 +03:00 [DBG] No user present in authorize request
2021-03-09 13:11:39.812 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 13:11:39.813 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:11:39.814 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 13:11:39.814 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 13:11:39.815 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"ad517092469f4f43a65852268162977e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"ad517092469f4f43a65852268162977e","code_challenge":"8xEMPrWeb8HyBmrIt7EgNpSornht_5WPZKJjUdo61B8","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 13:11:39.823 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 13:11:39.824 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 13:11:39.829 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"ad517092469f4f43a65852268162977e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"ad517092469f4f43a65852268162977e","code_challenge":"8xEMPrWeb8HyBmrIt7EgNpSornht_5WPZKJjUdo61B8","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 13:11:39.837 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72S8KED9S2:00000037","TimeStamp":"2021-03-09T10:11:39.0000000Z","ProcessId":17556,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 13:11:42.493 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 13:11:42.501 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 13:11:42.502 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 13:11:42.504 +03:00 [DBG] Start authorize request
2021-03-09 13:11:42.506 +03:00 [DBG] No user present in authorize request
2021-03-09 13:11:42.506 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 13:11:42.507 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:11:42.509 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 13:11:42.510 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 13:11:42.511 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"bd2d7e651b5b410682a11c16e758489b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"bd2d7e651b5b410682a11c16e758489b","code_challenge":"MLeDhuDukdX2Ga4ffIHvymycKlhi603wKtvbohqO1Hw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 13:11:42.525 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 13:11:42.525 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 13:11:42.527 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"bd2d7e651b5b410682a11c16e758489b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"bd2d7e651b5b410682a11c16e758489b","code_challenge":"MLeDhuDukdX2Ga4ffIHvymycKlhi603wKtvbohqO1Hw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 13:11:42.538 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72S8KED9S2:0000003F","TimeStamp":"2021-03-09T10:11:42.0000000Z","ProcessId":17556,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 13:11:42.623 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 13:11:42.625 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 13:11:42.626 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 13:11:42.628 +03:00 [DBG] Start authorize request
2021-03-09 13:11:42.629 +03:00 [DBG] No user present in authorize request
2021-03-09 13:11:42.630 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 13:11:42.630 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:11:42.633 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 13:11:42.634 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 13:11:42.635 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"62fc12fc8bfa485ebba23ccf2d10e625","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"62fc12fc8bfa485ebba23ccf2d10e625","code_challenge":"jKIdDLxbki4sgdUkFfOU19eLTTyFX6PM3UoVOLe41hk","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 13:11:42.643 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 13:11:42.675 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-09 13:11:48.033 +03:00 [DBG] Augmenting SignInContext
2021-03-09 13:11:48.034 +03:00 [DBG] Adding idp claim with value: local
2021-03-09 13:11:48.036 +03:00 [DBG] Adding auth_time claim with value: 1615284708
2021-03-09 13:11:48.040 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-09 13:11:48.041 +03:00 [INF] User logged in.
2021-03-09 13:11:48.049 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-09 13:11:48.051 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-09 13:11:48.052 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-09 13:11:48.055 +03:00 [DBG] Start authorize callback request
2021-03-09 13:11:48.058 +03:00 [DBG] User in authorize request: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 13:11:48.059 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 13:11:48.060 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:11:48.062 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 13:11:48.063 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 13:11:48.064 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"62fc12fc8bfa485ebba23ccf2d10e625","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"C35DF11EEA317A0DD1C1BCC43A84765E","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"62fc12fc8bfa485ebba23ccf2d10e625","code_challenge":"jKIdDLxbki4sgdUkFfOU19eLTTyFX6PM3UoVOLe41hk","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 13:11:48.641 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-09 13:11:48.641 +03:00 [DBG] Creating Authorization Code Flow response.
2021-03-09 13:11:49.214 +03:00 [DBG] 13GDFMmDNEbgEcS1nxuyQ5rKhBXCYIfS6Yw9CpoocuU= not found in database
2021-03-09 13:11:49.817 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****0243","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72S8KED9S2:0000004D","TimeStamp":"2021-03-09T10:11:49.0000000Z","ProcessId":17556,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 13:11:49.826 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ClientId":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","State":"62fc12fc8bfa485ebba23ccf2d10e625","Scope":"Redpier.WebUI.ServerAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-09 13:11:49.830 +03:00 [DBG] Augmenting SignInContext
2021-03-09 13:11:49.830 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-09 13:11:51.166 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 13:11:51.170 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 13:11:51.172 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 13:11:51.173 +03:00 [DBG] Start discovery request
2021-03-09 13:11:51.185 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 13:11:51.187 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 13:11:51.188 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 13:11:51.189 +03:00 [DBG] Start token request.
2021-03-09 13:11:51.190 +03:00 [DBG] Start client validation
2021-03-09 13:11:51.190 +03:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 13:11:51.191 +03:00 [DBG] Start parsing for secret in post body
2021-03-09 13:11:51.192 +03:00 [DBG] client id without secret found
2021-03-09 13:11:51.193 +03:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 13:11:51.193 +03:00 [DBG] Secret id found: Redpier.WebUI.Client
2021-03-09 13:11:51.194 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:11:51.195 +03:00 [DBG] Public Client - skipping secret validation success
2021-03-09 13:11:51.196 +03:00 [DBG] Client validation success
2021-03-09 13:11:51.196 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM72S8KED9S2:0000005B","TimeStamp":"2021-03-09T10:11:51.0000000Z","ProcessId":17556,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-09 13:11:51.203 +03:00 [DBG] Start token request validation
2021-03-09 13:11:51.204 +03:00 [DBG] Start validation of authorization code token request
2021-03-09 13:11:51.744 +03:00 [DBG] 13GDFMmDNEbgEcS1nxuyQ5rKhBXCYIfS6Yw9CpoocuU= found in database: true
2021-03-09 13:11:52.287 +03:00 [DBG] removing 13GDFMmDNEbgEcS1nxuyQ5rKhBXCYIfS6Yw9CpoocuU= persisted grant from database
2021-03-09 13:11:52.848 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-09 13:11:53.423 +03:00 [DBG] Validation of authorization code token request success
2021-03-09 13:11:53.424 +03:00 [INF] Token request validation success, {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"2A55937A99412A0F598E214DCD5D92FBC275FFA0E7FC16FAAE79CD3219E70243","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Redpier.WebUI.Client","code":"2A55937A99412A0F598E214DCD5D92FBC275FFA0E7FC16FAAE79CD3219E70243","redirect_uri":"https://localhost:5000/authentication/login-callback","code_verifier":"854828397202493e87e520367f789b3136d5a95982a94af5936d66e8e30be31d73cbeabe6abe4464a811662058939146","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-09 13:11:53.429 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:11:53.430 +03:00 [DBG] Getting claims for access token for client: Redpier.WebUI.Client
2021-03-09 13:11:53.431 +03:00 [DBG] Getting claims for access token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 13:11:55.644 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:11:55.647 +03:00 [DBG] Getting claims for identity token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6 and client: Redpier.WebUI.Client
2021-03-09 13:11:55.648 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-09 13:11:55.651 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****pkfg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****jYVA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72S8KED9S2:0000005B","TimeStamp":"2021-03-09T10:11:55.0000000Z","ProcessId":17556,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 13:11:55.659 +03:00 [DBG] Token request success.
2021-03-09 13:11:55.669 +03:00 [INF] Successfully validated the token.
2021-03-09 13:11:55.671 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-09 13:11:55.672 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-09 13:11:55.673 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-09 13:11:55.674 +03:00 [DBG] Start userinfo request
2021-03-09 13:11:55.675 +03:00 [DBG] Bearer token found in header
2021-03-09 13:11:55.676 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:11:55.676 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:11:56.249 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 13:11:56.253 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"CCF0FEF98B9F41959F8C0EDE31655D02","Claims":{"nbf":1615284715,"exp":1615288315,"iss":"https://localhost:5000","aud":"Redpier.WebUI.ServerAPI","client_id":"Redpier.WebUI.Client","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615284708,"idp":"local","jti":"CCF0FEF98B9F41959F8C0EDE31655D02","sid":"C35DF11EEA317A0DD1C1BCC43A84765E","iat":1615284715,"scope":["Redpier.WebUI.ServerAPI","openid","profile"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 13:11:56.259 +03:00 [DBG] Creating userinfo response
2021-03-09 13:11:56.259 +03:00 [DBG] Scopes in access token: Redpier.WebUI.ServerAPI openid profile
2021-03-09 13:11:56.260 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2021-03-09 13:11:58.545 +03:00 [INF] Profile service returned the following claim types: sub preferred_username name
2021-03-09 13:11:58.546 +03:00 [DBG] End userinfo request
2021-03-09 13:11:58.562 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-09 13:11:58.563 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-09 13:11:58.564 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-09 13:11:58.566 +03:00 [DBG] Rendering check session result
2021-03-09 13:12:02.957 +03:00 [INF] Application is shutting down...
2021-03-09 13:52:43.765 +03:00 [INF] Starting host...
2021-03-09 13:52:49.538 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 13:52:49.857 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 13:52:49.857 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 13:52:49.858 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 13:52:49.858 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 13:52:49.858 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 13:52:49.859 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 13:52:50.423 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 13:52:50.424 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 13:52:50.424 +03:00 [INF] Hosting environment: Development
2021-03-09 13:52:50.425 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 13:52:52.735 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 13:52:52.737 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 13:52:52.740 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 13:52:52.741 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 13:52:52.741 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 13:52:52.742 +03:00 [DBG] Error Url: /Home
2021-03-09 13:52:52.743 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 13:52:56.090 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 13:52:56.098 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 13:52:56.101 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 13:52:56.103 +03:00 [DBG] Start discovery request
2021-03-09 13:52:56.199 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 13:52:56.223 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 13:52:56.225 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 13:52:56.229 +03:00 [DBG] Start authorize request
2021-03-09 13:52:56.391 +03:00 [DBG] User in authorize request: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 13:52:56.409 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 13:52:56.420 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:52:56.432 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 13:52:56.450 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 13:52:56.462 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"f02a2cb8d7cc4b6e8c6047e8938646ec","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"C35DF11EEA317A0DD1C1BCC43A84765E","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"f02a2cb8d7cc4b6e8c6047e8938646ec","code_challenge":"lcuvHoa4ABIDwgjzcfqT2ZXREiOtl1ZgTFC3alwNke8","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 13:52:57.085 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-09 13:52:57.087 +03:00 [DBG] Creating Authorization Code Flow response.
2021-03-09 13:52:57.724 +03:00 [DBG] QkQi5GWv0uQT/shXsUJdJXLELUdq9lFzsyDzdDlRIPE= not found in database
2021-03-09 13:52:58.654 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****13F8","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72T5TTPC4Q:00000011","TimeStamp":"2021-03-09T10:52:58.0000000Z","ProcessId":4604,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 13:52:58.664 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ClientId":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","State":"f02a2cb8d7cc4b6e8c6047e8938646ec","Scope":"Redpier.WebUI.ServerAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-09 13:52:58.776 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 13:52:58.783 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 13:52:58.784 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 13:52:58.789 +03:00 [DBG] Start token request.
2021-03-09 13:52:58.793 +03:00 [DBG] Start client validation
2021-03-09 13:52:58.797 +03:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 13:52:58.800 +03:00 [DBG] Start parsing for secret in post body
2021-03-09 13:52:58.808 +03:00 [DBG] client id without secret found
2021-03-09 13:52:58.809 +03:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 13:52:58.809 +03:00 [DBG] Secret id found: Redpier.WebUI.Client
2021-03-09 13:52:58.810 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:52:58.811 +03:00 [DBG] Public Client - skipping secret validation success
2021-03-09 13:52:58.811 +03:00 [DBG] Client validation success
2021-03-09 13:52:58.813 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM72T5TTPC4Q:00000019","TimeStamp":"2021-03-09T10:52:58.0000000Z","ProcessId":4604,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-09 13:52:58.819 +03:00 [DBG] Start token request validation
2021-03-09 13:52:58.822 +03:00 [DBG] Start validation of authorization code token request
2021-03-09 13:52:59.421 +03:00 [DBG] QkQi5GWv0uQT/shXsUJdJXLELUdq9lFzsyDzdDlRIPE= found in database: true
2021-03-09 13:53:00.012 +03:00 [DBG] removing QkQi5GWv0uQT/shXsUJdJXLELUdq9lFzsyDzdDlRIPE= persisted grant from database
2021-03-09 13:53:00.691 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-09 13:53:01.300 +03:00 [DBG] Validation of authorization code token request success
2021-03-09 13:53:01.303 +03:00 [INF] Token request validation success, {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"E71636F6F34E180A9C5012D659697E59876352554C011DBB9127D90AE5CC13F8","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Redpier.WebUI.Client","code":"E71636F6F34E180A9C5012D659697E59876352554C011DBB9127D90AE5CC13F8","redirect_uri":"https://localhost:5000/authentication/login-callback","code_verifier":"f77deef8e4db42e1b1aabdd0055386e45b1260ef36f04335b18a80fa592e33daca69f5a8cf7643c2b3ab3a39b51cd197","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-09 13:53:01.317 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:53:01.330 +03:00 [DBG] Getting claims for access token for client: Redpier.WebUI.Client
2021-03-09 13:53:01.331 +03:00 [DBG] Getting claims for access token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 13:53:03.815 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:53:03.824 +03:00 [DBG] Getting claims for identity token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6 and client: Redpier.WebUI.Client
2021-03-09 13:53:03.825 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-09 13:53:03.828 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****hIOw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****XWPA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72T5TTPC4Q:00000019","TimeStamp":"2021-03-09T10:53:03.0000000Z","ProcessId":4604,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 13:53:03.839 +03:00 [DBG] Token request success.
2021-03-09 13:53:03.926 +03:00 [INF] Successfully validated the token.
2021-03-09 13:53:03.929 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-09 13:53:03.930 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-09 13:53:03.931 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-09 13:53:03.936 +03:00 [DBG] Start userinfo request
2021-03-09 13:53:03.939 +03:00 [DBG] Bearer token found in header
2021-03-09 13:53:03.948 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:53:03.951 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:53:04.520 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 13:53:04.526 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"C1277BE3B4DE3F26B34442ABB8F8663E","Claims":{"nbf":1615287183,"exp":1615290783,"iss":"https://localhost:5000","aud":"Redpier.WebUI.ServerAPI","client_id":"Redpier.WebUI.Client","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615284708,"idp":"local","jti":"C1277BE3B4DE3F26B34442ABB8F8663E","sid":"C35DF11EEA317A0DD1C1BCC43A84765E","iat":1615287183,"scope":["Redpier.WebUI.ServerAPI","openid","profile"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 13:53:04.534 +03:00 [DBG] Creating userinfo response
2021-03-09 13:53:04.538 +03:00 [DBG] Scopes in access token: Redpier.WebUI.ServerAPI openid profile
2021-03-09 13:53:04.541 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2021-03-09 13:53:06.838 +03:00 [INF] Profile service returned the following claim types: sub preferred_username name
2021-03-09 13:53:06.839 +03:00 [DBG] End userinfo request
2021-03-09 13:53:06.856 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-09 13:53:06.857 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-09 13:53:06.858 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-09 13:53:06.859 +03:00 [DBG] Rendering check session result
2021-03-09 13:53:10.827 +03:00 [DBG] Request path /connect/endsession matched to endpoint type EndSession
2021-03-09 13:53:10.829 +03:00 [DBG] Endpoint enabled: EndSession, successfully created handler: Microsoft.AspNetCore.ApiAuthorization.IdentityServer.AutoRedirectEndSessionEndpoint
2021-03-09 13:53:10.831 +03:00 [INF] Invoking IdentityServer endpoint: Microsoft.AspNetCore.ApiAuthorization.IdentityServer.AutoRedirectEndSessionEndpoint for /connect/endsession
2021-03-09 13:53:10.840 +03:00 [DBG] Start end session request validation
2021-03-09 13:53:10.843 +03:00 [DBG] Start identity token validation
2021-03-09 13:53:10.845 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:53:10.846 +03:00 [DBG] Client found: Redpier.WebUI.Client / Redpier.WebUI.Client
2021-03-09 13:53:10.851 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 13:53:10.852 +03:00 [DBG] Token validation success
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1615287183,"exp":1615287483,"iss":"https://localhost:5000","aud":"Redpier.WebUI.Client","iat":1615287183,"at_hash":"VPuEfZr1PzTwzuTa8KWE8A","s_hash":"eN7RvDEmnO9kjQ8An-jDXg","sid":"C35DF11EEA317A0DD1C1BCC43A84765E","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615284708,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 13:53:10.863 +03:00 [INF] End session request validation success
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","PostLogOutUri":"https://localhost:5000/authentication/logout-callback","State":"936dac25895248aab1a3edb5c79c596b","Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:5000/authentication/logout-callback","state":"936dac25895248aab1a3edb5c79c596b"},"$type":"EndSessionRequestValidationLog"}
2021-03-09 13:53:10.872 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-09 13:53:10.875 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2021-03-09 13:53:10.882 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:53:10.883 +03:00 [DBG] No client back-channel logout URLs
2021-03-09 13:53:11.912 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 13:53:11.914 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 13:53:11.915 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 13:53:11.916 +03:00 [DBG] Start discovery request
2021-03-09 13:53:11.926 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 13:53:11.927 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 13:53:11.928 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 13:53:11.929 +03:00 [DBG] Start authorize request
2021-03-09 13:53:11.930 +03:00 [DBG] No user present in authorize request
2021-03-09 13:53:11.930 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 13:53:11.931 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:53:11.931 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 13:53:11.932 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 13:53:11.932 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"2ec328adeb3349f68bf10bc3961a7648","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"2ec328adeb3349f68bf10bc3961a7648","code_challenge":"vtDQlBARZGv4gFKdAe5VzEwInluki7KTG_G48H3GoNg","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 13:53:11.937 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 13:53:11.937 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 13:53:11.939 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"2ec328adeb3349f68bf10bc3961a7648","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"2ec328adeb3349f68bf10bc3961a7648","code_challenge":"vtDQlBARZGv4gFKdAe5VzEwInluki7KTG_G48H3GoNg","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 13:53:11.945 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72T5TTPC4Q:0000002D","TimeStamp":"2021-03-09T10:53:11.0000000Z","ProcessId":4604,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 13:53:37.711 +03:00 [INF] Starting host...
2021-03-09 13:53:42.786 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 13:53:42.922 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 13:53:42.924 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 13:53:42.924 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 13:53:42.924 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 13:53:42.925 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 13:53:42.925 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 13:53:43.056 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 13:53:43.056 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 13:53:43.057 +03:00 [INF] Hosting environment: Development
2021-03-09 13:53:43.058 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 13:53:45.206 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 13:53:45.208 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 13:53:45.209 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 13:53:45.210 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 13:53:45.210 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 13:53:45.211 +03:00 [DBG] Error Url: /Home
2021-03-09 13:53:45.211 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 13:53:45.324 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 13:53:45.328 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 13:53:45.329 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 13:53:45.330 +03:00 [DBG] Start discovery request
2021-03-09 13:53:45.369 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 13:53:45.374 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 13:53:45.374 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 13:53:45.377 +03:00 [DBG] Start authorize request
2021-03-09 13:53:45.380 +03:00 [DBG] No user present in authorize request
2021-03-09 13:53:45.382 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 13:53:45.390 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 13:53:45.398 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 13:53:45.413 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 13:53:45.423 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"fcc6ad3e89584d6c96eba48976782902","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"fcc6ad3e89584d6c96eba48976782902","code_challenge":"GyuIhMo7VQEE86TXbIW3i80bxXUbUWk0kWff1WrfMDw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 13:53:45.438 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 13:53:45.438 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 13:53:45.440 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"fcc6ad3e89584d6c96eba48976782902","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"fcc6ad3e89584d6c96eba48976782902","code_challenge":"GyuIhMo7VQEE86TXbIW3i80bxXUbUWk0kWff1WrfMDw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 13:53:45.451 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72T6DLNMF5:0000000B","TimeStamp":"2021-03-09T10:53:45.0000000Z","ProcessId":15476,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 13:54:03.071 +03:00 [INF] Application is shutting down...
2021-03-09 14:04:12.830 +03:00 [INF] Starting host...
2021-03-09 14:04:18.138 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 14:04:18.362 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 14:04:18.363 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 14:04:18.364 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 14:04:18.364 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 14:04:18.364 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 14:04:18.365 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 14:04:18.619 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 14:04:18.620 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 14:04:18.620 +03:00 [INF] Hosting environment: Development
2021-03-09 14:04:18.621 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 14:04:21.025 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 14:04:21.027 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 14:04:21.028 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 14:04:21.029 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 14:04:21.030 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 14:04:21.032 +03:00 [DBG] Error Url: /Home
2021-03-09 14:04:21.032 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 14:04:21.166 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:04:21.171 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:04:21.172 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:04:21.174 +03:00 [DBG] Start discovery request
2021-03-09 14:04:21.219 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:04:21.227 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:04:21.228 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:04:21.232 +03:00 [DBG] Start authorize request
2021-03-09 14:04:21.237 +03:00 [DBG] No user present in authorize request
2021-03-09 14:04:21.248 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:04:21.259 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:04:21.268 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:04:21.297 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:04:21.309 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"f705f2941ba3463c9f10e3f660a561c2","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"f705f2941ba3463c9f10e3f660a561c2","code_challenge":"ez4mKNMUMT8nUGdm3-t6XcDMIrk_GMySwAzfe5Q7eLw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:04:21.326 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:04:21.327 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:04:21.329 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"f705f2941ba3463c9f10e3f660a561c2","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"f705f2941ba3463c9f10e3f660a561c2","code_challenge":"ez4mKNMUMT8nUGdm3-t6XcDMIrk_GMySwAzfe5Q7eLw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:04:21.354 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TCB3BAUL:00000011","TimeStamp":"2021-03-09T11:04:21.0000000Z","ProcessId":20692,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:04:21.540 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:04:21.545 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:04:21.546 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:04:21.548 +03:00 [DBG] Start authorize request
2021-03-09 14:04:21.549 +03:00 [DBG] No user present in authorize request
2021-03-09 14:04:21.549 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:04:21.551 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:04:21.552 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:04:21.553 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:04:21.555 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"3b939901572b41b1b7f62eee4c5c8c87","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"3b939901572b41b1b7f62eee4c5c8c87","code_challenge":"sG9Dgem9KqNzvCifyQ6p6q8R5qx5Cib_GCGVzy6ND6U","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:04:21.569 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:04:21.569 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:04:21.571 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"3b939901572b41b1b7f62eee4c5c8c87","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"3b939901572b41b1b7f62eee4c5c8c87","code_challenge":"sG9Dgem9KqNzvCifyQ6p6q8R5qx5Cib_GCGVzy6ND6U","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:04:21.582 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TCB3BAUL:00000019","TimeStamp":"2021-03-09T11:04:21.0000000Z","ProcessId":20692,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:04:21.650 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:04:21.668 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:04:21.669 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:04:21.674 +03:00 [DBG] Start authorize request
2021-03-09 14:04:21.674 +03:00 [DBG] No user present in authorize request
2021-03-09 14:04:21.675 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:04:21.676 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:04:21.677 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:04:21.677 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:04:21.679 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"791737957dd94b8dbe7a73d736c04888","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"791737957dd94b8dbe7a73d736c04888","code_challenge":"lJIfjkVPx-iIi8zBMRsHAdpymrXAwHueCrWcXCeNSFQ","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:04:21.688 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:04:21.747 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-09 14:04:36.522 +03:00 [DBG] Augmenting SignInContext
2021-03-09 14:04:36.524 +03:00 [DBG] Adding idp claim with value: local
2021-03-09 14:04:36.525 +03:00 [DBG] Adding auth_time claim with value: 1615287876
2021-03-09 14:04:36.533 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-09 14:04:36.534 +03:00 [INF] User logged in.
2021-03-09 14:04:36.550 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-09 14:04:36.552 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-09 14:04:36.553 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-09 14:04:36.557 +03:00 [DBG] Start authorize callback request
2021-03-09 14:04:36.560 +03:00 [DBG] User in authorize request: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:04:36.561 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:04:36.562 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:04:36.564 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:04:36.567 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:04:36.568 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"791737957dd94b8dbe7a73d736c04888","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"B9EDB35E4860CB6865C94CA0C2A85E3A","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"791737957dd94b8dbe7a73d736c04888","code_challenge":"lJIfjkVPx-iIi8zBMRsHAdpymrXAwHueCrWcXCeNSFQ","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:04:37.213 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-09 14:04:37.215 +03:00 [DBG] Creating Authorization Code Flow response.
2021-03-09 14:04:37.884 +03:00 [DBG] vluc5eTPgOAV9BXC6YyNyOvLW3v2oi4Ha0rC+yWgCCI= not found in database
2021-03-09 14:04:38.757 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****8066","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72TCB3BAUL:00000027","TimeStamp":"2021-03-09T11:04:38.0000000Z","ProcessId":20692,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:04:38.769 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ClientId":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","State":"791737957dd94b8dbe7a73d736c04888","Scope":"Redpier.WebUI.ServerAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-09 14:04:38.774 +03:00 [DBG] Augmenting SignInContext
2021-03-09 14:04:38.775 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-09 14:04:40.320 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:04:40.323 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:04:40.327 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:04:40.328 +03:00 [DBG] Start discovery request
2021-03-09 14:04:40.341 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 14:04:40.344 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 14:04:40.345 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 14:04:40.349 +03:00 [DBG] Start token request.
2021-03-09 14:04:40.351 +03:00 [DBG] Start client validation
2021-03-09 14:04:40.355 +03:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 14:04:40.356 +03:00 [DBG] Start parsing for secret in post body
2021-03-09 14:04:40.357 +03:00 [DBG] client id without secret found
2021-03-09 14:04:40.357 +03:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 14:04:40.358 +03:00 [DBG] Secret id found: Redpier.WebUI.Client
2021-03-09 14:04:40.358 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:04:40.359 +03:00 [DBG] Public Client - skipping secret validation success
2021-03-09 14:04:40.360 +03:00 [DBG] Client validation success
2021-03-09 14:04:40.361 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM72TCB3BAUL:00000035","TimeStamp":"2021-03-09T11:04:40.0000000Z","ProcessId":20692,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-09 14:04:40.365 +03:00 [DBG] Start token request validation
2021-03-09 14:04:40.369 +03:00 [DBG] Start validation of authorization code token request
2021-03-09 14:04:40.948 +03:00 [DBG] vluc5eTPgOAV9BXC6YyNyOvLW3v2oi4Ha0rC+yWgCCI= found in database: true
2021-03-09 14:04:41.685 +03:00 [DBG] removing vluc5eTPgOAV9BXC6YyNyOvLW3v2oi4Ha0rC+yWgCCI= persisted grant from database
2021-03-09 14:04:42.418 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-09 14:04:43.003 +03:00 [DBG] Validation of authorization code token request success
2021-03-09 14:04:43.008 +03:00 [INF] Token request validation success, {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"10E2928AB3CE8EAC4EE623CFBE16A7CF5AB0343677876C3AB1F653EDA2328066","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Redpier.WebUI.Client","code":"10E2928AB3CE8EAC4EE623CFBE16A7CF5AB0343677876C3AB1F653EDA2328066","redirect_uri":"https://localhost:5000/authentication/login-callback","code_verifier":"ab84b26cbc0c46fb891c053de1aa36e233dddc3a6c224826af7683910aea97013c1822ca5102449788a1fcf467cdc41d","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-09 14:04:43.019 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:04:43.029 +03:00 [DBG] Getting claims for access token for client: Redpier.WebUI.Client
2021-03-09 14:04:43.031 +03:00 [DBG] Getting claims for access token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:04:45.408 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:04:45.415 +03:00 [DBG] Getting claims for identity token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6 and client: Redpier.WebUI.Client
2021-03-09 14:04:45.416 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-09 14:04:45.421 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****XXjQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****iRNA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72TCB3BAUL:00000035","TimeStamp":"2021-03-09T11:04:45.0000000Z","ProcessId":20692,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:04:45.427 +03:00 [DBG] Token request success.
2021-03-09 14:04:45.506 +03:00 [INF] Successfully validated the token.
2021-03-09 14:04:45.508 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-09 14:04:45.510 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-09 14:04:45.511 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-09 14:04:45.515 +03:00 [DBG] Start userinfo request
2021-03-09 14:04:45.517 +03:00 [DBG] Bearer token found in header
2021-03-09 14:04:45.525 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:04:45.529 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:04:46.242 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 14:04:46.245 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"1A70060EB8490300DBC4EA6C1B616394","Claims":{"nbf":1615287885,"exp":1615291485,"iss":"https://localhost:5000","aud":"Redpier.WebUI.ServerAPI","client_id":"Redpier.WebUI.Client","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615287876,"idp":"local","jti":"1A70060EB8490300DBC4EA6C1B616394","sid":"B9EDB35E4860CB6865C94CA0C2A85E3A","iat":1615287885,"scope":["Redpier.WebUI.ServerAPI","openid","profile"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 14:04:46.254 +03:00 [DBG] Creating userinfo response
2021-03-09 14:04:46.256 +03:00 [DBG] Scopes in access token: Redpier.WebUI.ServerAPI openid profile
2021-03-09 14:04:46.261 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2021-03-09 14:04:49.062 +03:00 [INF] Profile service returned the following claim types: sub preferred_username name
2021-03-09 14:04:49.064 +03:00 [DBG] End userinfo request
2021-03-09 14:04:49.081 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-09 14:04:49.083 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-09 14:04:49.087 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-09 14:04:49.089 +03:00 [DBG] Rendering check session result
2021-03-09 14:06:02.634 +03:00 [INF] Application is shutting down...
2021-03-09 14:09:11.462 +03:00 [INF] Starting host...
2021-03-09 14:09:16.618 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 14:09:16.849 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 14:09:16.850 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 14:09:16.850 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 14:09:16.850 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 14:09:16.851 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 14:09:16.851 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 14:09:17.113 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 14:09:17.114 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 14:09:17.114 +03:00 [INF] Hosting environment: Development
2021-03-09 14:09:17.115 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 14:09:19.082 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 14:09:19.084 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 14:09:19.086 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 14:09:19.087 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 14:09:19.087 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 14:09:19.088 +03:00 [DBG] Error Url: /Home
2021-03-09 14:09:19.089 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 14:09:19.217 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:09:19.220 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:09:19.221 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:09:19.224 +03:00 [DBG] Start discovery request
2021-03-09 14:09:19.286 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:09:19.291 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:09:19.292 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:09:19.294 +03:00 [DBG] Start authorize request
2021-03-09 14:09:19.307 +03:00 [DBG] User in authorize request: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:09:19.319 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:09:19.329 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:09:19.340 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:09:19.357 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:09:19.369 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"622bf229796b4222a967e5a7b4e9fed6","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"B9EDB35E4860CB6865C94CA0C2A85E3A","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"622bf229796b4222a967e5a7b4e9fed6","code_challenge":"3AmOcqS3oegJGSp1lZUaVqtPMKgeHom1ghHhbjRc1vE","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:09:20.119 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-09 14:09:20.123 +03:00 [DBG] Creating Authorization Code Flow response.
2021-03-09 14:09:20.783 +03:00 [DBG] IyHOU6cG2o+mxAFq1xzZKjakgJtzo9ZuLVIctS37WNI= not found in database
2021-03-09 14:09:21.631 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****7C7A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72TF3U8E6S:0000000F","TimeStamp":"2021-03-09T11:09:21.0000000Z","ProcessId":11760,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:09:21.640 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ClientId":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","State":"622bf229796b4222a967e5a7b4e9fed6","Scope":"Redpier.WebUI.ServerAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-09 14:09:21.730 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 14:09:21.734 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 14:09:21.735 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 14:09:21.740 +03:00 [DBG] Start token request.
2021-03-09 14:09:21.742 +03:00 [DBG] Start client validation
2021-03-09 14:09:21.747 +03:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 14:09:21.749 +03:00 [DBG] Start parsing for secret in post body
2021-03-09 14:09:21.753 +03:00 [DBG] client id without secret found
2021-03-09 14:09:21.754 +03:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 14:09:21.755 +03:00 [DBG] Secret id found: Redpier.WebUI.Client
2021-03-09 14:09:21.756 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:09:21.757 +03:00 [DBG] Public Client - skipping secret validation success
2021-03-09 14:09:21.759 +03:00 [DBG] Client validation success
2021-03-09 14:09:21.760 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM72TF3U8E6S:00000017","TimeStamp":"2021-03-09T11:09:21.0000000Z","ProcessId":11760,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-09 14:09:21.770 +03:00 [DBG] Start token request validation
2021-03-09 14:09:21.774 +03:00 [DBG] Start validation of authorization code token request
2021-03-09 14:09:22.368 +03:00 [DBG] IyHOU6cG2o+mxAFq1xzZKjakgJtzo9ZuLVIctS37WNI= found in database: true
2021-03-09 14:09:22.957 +03:00 [DBG] removing IyHOU6cG2o+mxAFq1xzZKjakgJtzo9ZuLVIctS37WNI= persisted grant from database
2021-03-09 14:09:23.552 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-09 14:09:24.128 +03:00 [DBG] Validation of authorization code token request success
2021-03-09 14:09:24.131 +03:00 [INF] Token request validation success, {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"D2D412CF0CC0578B540C0908FF51E5258E9F3EC5F46B212A0922DBC2736B7C7A","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Redpier.WebUI.Client","code":"D2D412CF0CC0578B540C0908FF51E5258E9F3EC5F46B212A0922DBC2736B7C7A","redirect_uri":"https://localhost:5000/authentication/login-callback","code_verifier":"d8d4dc8858db4288a33e5ae6bc8e8dfff219cb823435464b971042575c1a1a1972a103a313e345408479abec0966f177","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-09 14:09:24.142 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:09:24.154 +03:00 [DBG] Getting claims for access token for client: Redpier.WebUI.Client
2021-03-09 14:09:24.155 +03:00 [DBG] Getting claims for access token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:09:26.606 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:09:26.612 +03:00 [DBG] Getting claims for identity token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6 and client: Redpier.WebUI.Client
2021-03-09 14:09:26.613 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-09 14:09:26.618 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****IaVw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****JkxQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72TF3U8E6S:00000017","TimeStamp":"2021-03-09T11:09:26.0000000Z","ProcessId":11760,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:09:26.626 +03:00 [DBG] Token request success.
2021-03-09 14:09:26.711 +03:00 [INF] Successfully validated the token.
2021-03-09 14:09:26.714 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-09 14:09:26.717 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-09 14:09:26.718 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-09 14:09:26.721 +03:00 [DBG] Start userinfo request
2021-03-09 14:09:26.723 +03:00 [DBG] Bearer token found in header
2021-03-09 14:09:26.731 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:09:26.734 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:09:27.311 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 14:09:27.314 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"BA556D67EBD48DEF8169A37D358ACF25","Claims":{"nbf":1615288166,"exp":1615291766,"iss":"https://localhost:5000","aud":"Redpier.WebUI.ServerAPI","client_id":"Redpier.WebUI.Client","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615287876,"idp":"local","jti":"BA556D67EBD48DEF8169A37D358ACF25","sid":"B9EDB35E4860CB6865C94CA0C2A85E3A","iat":1615288166,"scope":["Redpier.WebUI.ServerAPI","openid","profile"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 14:09:27.322 +03:00 [DBG] Creating userinfo response
2021-03-09 14:09:27.324 +03:00 [DBG] Scopes in access token: Redpier.WebUI.ServerAPI openid profile
2021-03-09 14:09:27.328 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2021-03-09 14:09:29.599 +03:00 [INF] Profile service returned the following claim types: sub preferred_username name
2021-03-09 14:09:29.601 +03:00 [DBG] End userinfo request
2021-03-09 14:09:29.618 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-09 14:09:29.620 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-09 14:09:29.621 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-09 14:09:29.623 +03:00 [DBG] Rendering check session result
2021-03-09 14:10:44.525 +03:00 [INF] Starting host...
2021-03-09 14:10:49.697 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 14:10:49.920 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 14:10:49.921 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 14:10:49.921 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 14:10:49.921 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 14:10:49.922 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 14:10:49.922 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 14:10:50.163 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 14:10:50.164 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 14:10:50.165 +03:00 [INF] Hosting environment: Development
2021-03-09 14:10:50.165 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 14:10:52.577 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 14:10:52.580 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 14:10:52.582 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 14:10:52.583 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 14:10:52.584 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 14:10:52.585 +03:00 [DBG] Error Url: /Home
2021-03-09 14:10:52.585 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 14:10:52.725 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:10:52.729 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:10:52.730 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:10:52.733 +03:00 [DBG] Start discovery request
2021-03-09 14:10:52.791 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:10:52.797 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:10:52.799 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:10:52.802 +03:00 [DBG] Start authorize request
2021-03-09 14:10:52.815 +03:00 [DBG] User in authorize request: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:10:52.827 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:10:52.837 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:10:52.847 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:10:52.864 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:10:52.876 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"283ddbccf3fb4975b712b48c0a87b4b8","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"B9EDB35E4860CB6865C94CA0C2A85E3A","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"283ddbccf3fb4975b712b48c0a87b4b8","code_challenge":"Aa5l61u_LR0t6O6_tQYo4cxeJKQehIsv5GOQyaEaCbA","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:10:53.803 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-09 14:10:53.806 +03:00 [DBG] Creating Authorization Code Flow response.
2021-03-09 14:10:54.466 +03:00 [DBG] Gsb8YSRKCOWnf0o1Q33W3xP3saUs8cdwjsPoHgB3eAU= not found in database
2021-03-09 14:10:55.312 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****E60D","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72TFVO3P3J:0000000F","TimeStamp":"2021-03-09T11:10:55.0000000Z","ProcessId":22924,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:10:55.322 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ClientId":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","State":"283ddbccf3fb4975b712b48c0a87b4b8","Scope":"Redpier.WebUI.ServerAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-09 14:10:55.420 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 14:10:55.423 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 14:10:55.424 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 14:10:55.428 +03:00 [DBG] Start token request.
2021-03-09 14:10:55.429 +03:00 [DBG] Start client validation
2021-03-09 14:10:55.433 +03:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 14:10:55.435 +03:00 [DBG] Start parsing for secret in post body
2021-03-09 14:10:55.440 +03:00 [DBG] client id without secret found
2021-03-09 14:10:55.441 +03:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 14:10:55.442 +03:00 [DBG] Secret id found: Redpier.WebUI.Client
2021-03-09 14:10:55.443 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:10:55.444 +03:00 [DBG] Public Client - skipping secret validation success
2021-03-09 14:10:55.445 +03:00 [DBG] Client validation success
2021-03-09 14:10:55.446 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM72TFVO3P3J:00000017","TimeStamp":"2021-03-09T11:10:55.0000000Z","ProcessId":22924,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-09 14:10:55.452 +03:00 [DBG] Start token request validation
2021-03-09 14:10:55.457 +03:00 [DBG] Start validation of authorization code token request
2021-03-09 14:10:56.071 +03:00 [DBG] Gsb8YSRKCOWnf0o1Q33W3xP3saUs8cdwjsPoHgB3eAU= found in database: true
2021-03-09 14:10:56.668 +03:00 [DBG] removing Gsb8YSRKCOWnf0o1Q33W3xP3saUs8cdwjsPoHgB3eAU= persisted grant from database
2021-03-09 14:10:57.254 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-09 14:10:57.815 +03:00 [DBG] Validation of authorization code token request success
2021-03-09 14:10:57.818 +03:00 [INF] Token request validation success, {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"08A09CB42D5184E4566F6467060E51C891D6CB10B8A66442A9B5FAD5D95DE60D","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Redpier.WebUI.Client","code":"08A09CB42D5184E4566F6467060E51C891D6CB10B8A66442A9B5FAD5D95DE60D","redirect_uri":"https://localhost:5000/authentication/login-callback","code_verifier":"600d87b73139464fbff706dcdd65698832f2557bd31345f7ad1ef6bc3741ec72430a03790f54442db5091c26fdc6b1b0","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-09 14:10:57.827 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:10:57.840 +03:00 [DBG] Getting claims for access token for client: Redpier.WebUI.Client
2021-03-09 14:10:57.841 +03:00 [DBG] Getting claims for access token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:11:00.281 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:00.287 +03:00 [DBG] Getting claims for identity token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6 and client: Redpier.WebUI.Client
2021-03-09 14:11:00.288 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-09 14:11:00.291 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****MDnw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****GyKQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72TFVO3P3J:00000017","TimeStamp":"2021-03-09T11:11:00.0000000Z","ProcessId":22924,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:11:00.299 +03:00 [DBG] Token request success.
2021-03-09 14:11:00.387 +03:00 [INF] Successfully validated the token.
2021-03-09 14:11:00.389 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-09 14:11:00.391 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-09 14:11:00.392 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-09 14:11:00.395 +03:00 [DBG] Start userinfo request
2021-03-09 14:11:00.397 +03:00 [DBG] Bearer token found in header
2021-03-09 14:11:00.405 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:00.408 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:00.981 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 14:11:00.984 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"8B414CDA4143B34A508429DCDA26A9FA","Claims":{"nbf":1615288260,"exp":1615291860,"iss":"https://localhost:5000","aud":"Redpier.WebUI.ServerAPI","client_id":"Redpier.WebUI.Client","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615287876,"idp":"local","jti":"8B414CDA4143B34A508429DCDA26A9FA","sid":"B9EDB35E4860CB6865C94CA0C2A85E3A","iat":1615288260,"scope":["Redpier.WebUI.ServerAPI","openid","profile"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 14:11:00.994 +03:00 [DBG] Creating userinfo response
2021-03-09 14:11:00.995 +03:00 [DBG] Scopes in access token: Redpier.WebUI.ServerAPI openid profile
2021-03-09 14:11:00.998 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2021-03-09 14:11:03.287 +03:00 [INF] Profile service returned the following claim types: sub preferred_username name
2021-03-09 14:11:03.288 +03:00 [DBG] End userinfo request
2021-03-09 14:11:03.306 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-09 14:11:03.307 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-09 14:11:03.308 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-09 14:11:03.310 +03:00 [DBG] Rendering check session result
2021-03-09 14:11:13.096 +03:00 [DBG] Request path /connect/endsession matched to endpoint type EndSession
2021-03-09 14:11:13.099 +03:00 [DBG] Endpoint enabled: EndSession, successfully created handler: Microsoft.AspNetCore.ApiAuthorization.IdentityServer.AutoRedirectEndSessionEndpoint
2021-03-09 14:11:13.101 +03:00 [INF] Invoking IdentityServer endpoint: Microsoft.AspNetCore.ApiAuthorization.IdentityServer.AutoRedirectEndSessionEndpoint for /connect/endsession
2021-03-09 14:11:13.109 +03:00 [DBG] Start end session request validation
2021-03-09 14:11:13.113 +03:00 [DBG] Start identity token validation
2021-03-09 14:11:13.114 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:13.116 +03:00 [DBG] Client found: Redpier.WebUI.Client / Redpier.WebUI.Client
2021-03-09 14:11:13.118 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 14:11:13.120 +03:00 [DBG] Token validation success
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1615288260,"exp":1615288560,"iss":"https://localhost:5000","aud":"Redpier.WebUI.Client","iat":1615288260,"at_hash":"3miX464657yEiNRbf0lsdg","s_hash":"Lvaj3q4gb7gV2bsyIqvsLw","sid":"B9EDB35E4860CB6865C94CA0C2A85E3A","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615287876,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 14:11:13.135 +03:00 [INF] End session request validation success
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","PostLogOutUri":"https://localhost:5000/authentication/logout-callback","State":"d4d68bbc3a234972bff6cc9e5e05baac","Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:5000/authentication/logout-callback","state":"d4d68bbc3a234972bff6cc9e5e05baac"},"$type":"EndSessionRequestValidationLog"}
2021-03-09 14:11:13.157 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-09 14:11:13.160 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2021-03-09 14:11:13.167 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:13.169 +03:00 [DBG] No client back-channel logout URLs
2021-03-09 14:11:14.189 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:11:14.194 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:11:14.195 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:11:14.196 +03:00 [DBG] Start discovery request
2021-03-09 14:11:14.205 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:11:14.206 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:11:14.208 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:11:14.209 +03:00 [DBG] Start authorize request
2021-03-09 14:11:14.209 +03:00 [DBG] No user present in authorize request
2021-03-09 14:11:14.210 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:11:14.211 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:14.211 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:11:14.212 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:11:14.213 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"eb1fef2cc36d4044921ae1c14465198b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"eb1fef2cc36d4044921ae1c14465198b","code_challenge":"TWji4o4cjses5WMLJAEkrMUW3MJJWv5Y8WNv9n9YI2Y","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:14.219 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:11:14.220 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:11:14.225 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"eb1fef2cc36d4044921ae1c14465198b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"eb1fef2cc36d4044921ae1c14465198b","code_challenge":"TWji4o4cjses5WMLJAEkrMUW3MJJWv5Y8WNv9n9YI2Y","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:14.233 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TFVO3P3J:0000002B","TimeStamp":"2021-03-09T11:11:14.0000000Z","ProcessId":22924,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:11:27.704 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:11:27.707 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:11:27.708 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:11:27.710 +03:00 [DBG] Start discovery request
2021-03-09 14:11:27.722 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:11:27.728 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:11:27.729 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:11:27.731 +03:00 [DBG] Start authorize request
2021-03-09 14:11:27.731 +03:00 [DBG] No user present in authorize request
2021-03-09 14:11:27.732 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:11:27.733 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:27.734 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:11:27.735 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:11:27.737 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"26795736102f4a2491336a4736458f58","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"26795736102f4a2491336a4736458f58","code_challenge":"24UE8sjfaoi-pjMKCDnOCzvluIntVZLIzUV76CBz3lA","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:27.749 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:11:27.750 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:11:27.753 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"26795736102f4a2491336a4736458f58","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"26795736102f4a2491336a4736458f58","code_challenge":"24UE8sjfaoi-pjMKCDnOCzvluIntVZLIzUV76CBz3lA","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:27.765 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TFVO3P3J:0000003D","TimeStamp":"2021-03-09T11:11:27.0000000Z","ProcessId":22924,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:11:27.920 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:11:27.922 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:11:27.924 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:11:27.926 +03:00 [DBG] Start authorize request
2021-03-09 14:11:27.926 +03:00 [DBG] No user present in authorize request
2021-03-09 14:11:27.927 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:11:27.928 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:27.930 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:11:27.931 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:11:27.932 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"b97f2409ff8749a78c8aad0e9ae4e8d1","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"b97f2409ff8749a78c8aad0e9ae4e8d1","code_challenge":"KSx3xafraqUPueiTgIypBqcJbYxmSIsd8Jxy1ePJ1-k","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:27.946 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:11:27.947 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:11:27.948 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"b97f2409ff8749a78c8aad0e9ae4e8d1","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"b97f2409ff8749a78c8aad0e9ae4e8d1","code_challenge":"KSx3xafraqUPueiTgIypBqcJbYxmSIsd8Jxy1ePJ1-k","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:27.960 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TFVO3P3J:00000045","TimeStamp":"2021-03-09T11:11:27.0000000Z","ProcessId":22924,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:11:28.042 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:11:28.050 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:11:28.051 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:11:28.052 +03:00 [DBG] Start authorize request
2021-03-09 14:11:28.053 +03:00 [DBG] No user present in authorize request
2021-03-09 14:11:28.054 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:11:28.055 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:28.057 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:11:28.058 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:11:28.060 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"6301aa4a49854f57898a862809c7f2dd","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"6301aa4a49854f57898a862809c7f2dd","code_challenge":"xJny3OjC6J41YvJUHWfFttZCqheAfKeiU4fhhKba3js","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:28.073 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:11:28.113 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-09 14:11:31.332 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:11:31.334 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:11:31.335 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:11:31.336 +03:00 [DBG] Start discovery request
2021-03-09 14:11:31.347 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:11:31.348 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:11:31.349 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:11:31.350 +03:00 [DBG] Start authorize request
2021-03-09 14:11:31.350 +03:00 [DBG] No user present in authorize request
2021-03-09 14:11:31.351 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:11:31.352 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:31.353 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:11:31.354 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:11:31.355 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"b998292ddc7848bab238615dd5e74b4b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"b998292ddc7848bab238615dd5e74b4b","code_challenge":"P2J0-uCy9kcs2eYK1-0ydnlbDz5VbeVuEos9TO7wjig","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:31.364 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:11:31.364 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:11:31.365 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"b998292ddc7848bab238615dd5e74b4b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"b998292ddc7848bab238615dd5e74b4b","code_challenge":"P2J0-uCy9kcs2eYK1-0ydnlbDz5VbeVuEos9TO7wjig","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:31.372 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TFVO3P3J:0000005B","TimeStamp":"2021-03-09T11:11:31.0000000Z","ProcessId":22924,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:11:34.710 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:11:34.716 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:11:34.718 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:11:34.720 +03:00 [DBG] Start authorize request
2021-03-09 14:11:34.722 +03:00 [DBG] No user present in authorize request
2021-03-09 14:11:34.722 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:11:34.724 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:34.728 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:11:34.729 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:11:34.730 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"030a8ba1b3cc4b5c90eaca9ee002ea46","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"030a8ba1b3cc4b5c90eaca9ee002ea46","code_challenge":"GRmM9WRw95RplytWc91giTT5sk0vHqNYf6UF5VSTo0g","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:34.740 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:11:34.744 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:11:34.745 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"030a8ba1b3cc4b5c90eaca9ee002ea46","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"030a8ba1b3cc4b5c90eaca9ee002ea46","code_challenge":"GRmM9WRw95RplytWc91giTT5sk0vHqNYf6UF5VSTo0g","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:34.756 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TFVO3P3J:00000063","TimeStamp":"2021-03-09T11:11:34.0000000Z","ProcessId":22924,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:11:34.844 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:11:34.846 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:11:34.848 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:11:34.849 +03:00 [DBG] Start authorize request
2021-03-09 14:11:34.849 +03:00 [DBG] No user present in authorize request
2021-03-09 14:11:34.850 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:11:34.850 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:34.851 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:11:34.852 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:11:34.853 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"2e2d8342764f4039a43d2eac93b62a7e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"2e2d8342764f4039a43d2eac93b62a7e","code_challenge":"d7aBi-Buvxqfa1LrOZqhRIGRXxJ9nzWJ2o91R4q8BdA","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:34.859 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:11:34.872 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-09 14:11:37.274 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:11:37.276 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:11:37.278 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:11:37.279 +03:00 [DBG] Start discovery request
2021-03-09 14:11:37.291 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:11:37.292 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:11:37.293 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:11:37.294 +03:00 [DBG] Start authorize request
2021-03-09 14:11:37.295 +03:00 [DBG] No user present in authorize request
2021-03-09 14:11:37.297 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:11:37.301 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:37.302 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:11:37.303 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:11:37.305 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"ba08f2651f924d77b32dfb6a3ce275be","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"ba08f2651f924d77b32dfb6a3ce275be","code_challenge":"iRAVSHwWyJhFd5ZYuHy-Z86rhyrqCjmPWROVz_aLdlE","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:37.318 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:11:37.318 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:11:37.319 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"ba08f2651f924d77b32dfb6a3ce275be","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"ba08f2651f924d77b32dfb6a3ce275be","code_challenge":"iRAVSHwWyJhFd5ZYuHy-Z86rhyrqCjmPWROVz_aLdlE","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:37.326 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TFVO3P3J:00000077","TimeStamp":"2021-03-09T11:11:37.0000000Z","ProcessId":22924,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:11:37.482 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:11:37.487 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:11:37.489 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:11:37.491 +03:00 [DBG] Start authorize request
2021-03-09 14:11:37.492 +03:00 [DBG] No user present in authorize request
2021-03-09 14:11:37.492 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:11:37.493 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:37.495 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:11:37.497 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:11:37.498 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"d55b76aab8b04f5aaa39c75a1dec9dd2","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"d55b76aab8b04f5aaa39c75a1dec9dd2","code_challenge":"zQTO9dZn5tkHXnI5kTo3jiE1mtCTbQyPY2RHm4XYCcA","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:37.515 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:11:37.516 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:11:37.517 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"d55b76aab8b04f5aaa39c75a1dec9dd2","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"d55b76aab8b04f5aaa39c75a1dec9dd2","code_challenge":"zQTO9dZn5tkHXnI5kTo3jiE1mtCTbQyPY2RHm4XYCcA","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:37.532 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TFVO3P3J:0000007F","TimeStamp":"2021-03-09T11:11:37.0000000Z","ProcessId":22924,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:11:37.597 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:11:37.602 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:11:37.603 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:11:37.604 +03:00 [DBG] Start authorize request
2021-03-09 14:11:37.605 +03:00 [DBG] No user present in authorize request
2021-03-09 14:11:37.605 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:11:37.606 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:11:37.607 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:11:37.609 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:11:37.610 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"4b4bdd2fb783442495190c9b0c4817c2","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"4b4bdd2fb783442495190c9b0c4817c2","code_challenge":"YTH7KYcbFNbkzEMSF80ywLqhDe4evagVl8H-Gwyauzc","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:11:37.624 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:11:37.632 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-09 14:11:41.044 +03:00 [INF] Application is shutting down...
2021-03-09 14:21:18.799 +03:00 [INF] Starting host...
2021-03-09 14:21:23.856 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 14:21:23.987 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 14:21:23.987 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 14:21:23.988 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 14:21:23.988 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 14:21:23.988 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 14:21:23.989 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 14:21:24.113 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 14:21:24.113 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 14:21:24.114 +03:00 [INF] Hosting environment: Development
2021-03-09 14:21:24.114 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 14:21:26.030 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 14:21:26.033 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 14:21:26.034 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 14:21:26.035 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 14:21:26.036 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 14:21:26.037 +03:00 [DBG] Error Url: /Home
2021-03-09 14:21:26.037 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 14:21:26.137 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:21:26.143 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:21:26.144 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:21:26.145 +03:00 [DBG] Start discovery request
2021-03-09 14:21:26.185 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:21:26.190 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:21:26.190 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:21:26.193 +03:00 [DBG] Start authorize request
2021-03-09 14:21:26.196 +03:00 [DBG] No user present in authorize request
2021-03-09 14:21:26.198 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:21:26.208 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:21:26.216 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:21:26.233 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:21:26.243 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"01ca17d6066e4ac4a055c41704d84eaf","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"01ca17d6066e4ac4a055c41704d84eaf","code_challenge":"s0-XwZrfDwuHBf8bYhBG_p2yK1QsKiQnSy_nk8QqUpw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:21:26.259 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:21:26.260 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:21:26.262 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"01ca17d6066e4ac4a055c41704d84eaf","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"01ca17d6066e4ac4a055c41704d84eaf","code_challenge":"s0-XwZrfDwuHBf8bYhBG_p2yK1QsKiQnSy_nk8QqUpw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:21:26.276 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TLSM0B4L:00000011","TimeStamp":"2021-03-09T11:21:26.0000000Z","ProcessId":6600,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:22:07.419 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:22:07.421 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:22:07.422 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:22:07.424 +03:00 [DBG] Start discovery request
2021-03-09 14:22:08.760 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:22:08.772 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:22:08.773 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:22:08.774 +03:00 [DBG] Start discovery request
2021-03-09 14:22:08.786 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:22:08.788 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:22:08.789 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:22:08.789 +03:00 [DBG] Start authorize request
2021-03-09 14:22:08.790 +03:00 [DBG] No user present in authorize request
2021-03-09 14:22:08.790 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:22:08.791 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:22:08.793 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:22:08.794 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:22:08.795 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"71c5919377094f238844bb7ee8decf02","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"71c5919377094f238844bb7ee8decf02","code_challenge":"VFoTD13FPlCaPij_bHsOpIod507isRtXgZj16OcboXQ","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:22:08.801 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:22:08.801 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:22:08.802 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"71c5919377094f238844bb7ee8decf02","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"71c5919377094f238844bb7ee8decf02","code_challenge":"VFoTD13FPlCaPij_bHsOpIod507isRtXgZj16OcboXQ","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:22:08.808 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TLSM0B4L:0000003F","TimeStamp":"2021-03-09T11:22:08.0000000Z","ProcessId":6600,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:22:16.788 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:22:16.789 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:22:16.790 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:22:16.792 +03:00 [DBG] Start discovery request
2021-03-09 14:22:16.802 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:22:16.808 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:22:16.809 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:22:16.810 +03:00 [DBG] Start authorize request
2021-03-09 14:22:16.811 +03:00 [DBG] No user present in authorize request
2021-03-09 14:22:16.811 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:22:16.811 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:22:16.812 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:22:16.813 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:22:16.814 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"d00f4dce8eca4a53af2ca389d124ce4d","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"d00f4dce8eca4a53af2ca389d124ce4d","code_challenge":"JHKwACTY1vBMsnvH6kauDXfRUsIss1CcPXumWk-vG4w","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:22:16.818 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:22:16.818 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:22:16.819 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"d00f4dce8eca4a53af2ca389d124ce4d","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"d00f4dce8eca4a53af2ca389d124ce4d","code_challenge":"JHKwACTY1vBMsnvH6kauDXfRUsIss1CcPXumWk-vG4w","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:22:16.825 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TLSM0B4L:00000051","TimeStamp":"2021-03-09T11:22:16.0000000Z","ProcessId":6600,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:22:25.552 +03:00 [INF] Application is shutting down...
2021-03-09 14:23:08.516 +03:00 [INF] Starting host...
2021-03-09 14:23:13.665 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 14:23:13.803 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 14:23:13.804 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 14:23:13.804 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 14:23:13.805 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 14:23:13.806 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 14:23:13.806 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 14:23:13.932 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 14:23:13.933 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 14:23:13.933 +03:00 [INF] Hosting environment: Development
2021-03-09 14:23:13.934 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 14:23:15.858 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 14:23:15.860 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 14:23:15.862 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 14:23:15.862 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 14:23:15.863 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 14:23:15.864 +03:00 [DBG] Error Url: /Home
2021-03-09 14:23:15.865 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 14:23:15.980 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:23:15.985 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:23:15.986 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:23:15.988 +03:00 [DBG] Start discovery request
2021-03-09 14:23:16.035 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:23:16.041 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:23:16.042 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:23:16.044 +03:00 [DBG] Start authorize request
2021-03-09 14:23:16.049 +03:00 [DBG] No user present in authorize request
2021-03-09 14:23:16.051 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:23:16.060 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:23:16.069 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:23:16.087 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:23:16.099 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"b9e0796aafad49cd915a9bc30f200c77","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"b9e0796aafad49cd915a9bc30f200c77","code_challenge":"sbHRoROLqGVGMPbsFjMRsaTFj6C9EumLkVi2YvmzfOI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:16.119 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:23:16.120 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:23:16.122 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"b9e0796aafad49cd915a9bc30f200c77","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"b9e0796aafad49cd915a9bc30f200c77","code_challenge":"sbHRoROLqGVGMPbsFjMRsaTFj6C9EumLkVi2YvmzfOI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:16.140 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TMTCKKVO:0000000F","TimeStamp":"2021-03-09T11:23:16.0000000Z","ProcessId":19152,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:23:16.320 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:23:16.324 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:23:16.325 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:23:16.326 +03:00 [DBG] Start authorize request
2021-03-09 14:23:16.327 +03:00 [DBG] No user present in authorize request
2021-03-09 14:23:16.328 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:23:16.328 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:23:16.329 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:23:16.330 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:23:16.331 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"32afc019886b44adb13223ce2ed156a3","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"32afc019886b44adb13223ce2ed156a3","code_challenge":"N_JGJxxy8VJW3CGaUoAfcJHFzpXYz1bNSEUMTTDHo4s","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:16.341 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:23:16.342 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:23:16.343 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"32afc019886b44adb13223ce2ed156a3","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"32afc019886b44adb13223ce2ed156a3","code_challenge":"N_JGJxxy8VJW3CGaUoAfcJHFzpXYz1bNSEUMTTDHo4s","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:16.350 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TMTCKKVO:00000017","TimeStamp":"2021-03-09T11:23:16.0000000Z","ProcessId":19152,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:23:16.419 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:23:16.433 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:23:16.435 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:23:16.436 +03:00 [DBG] Start authorize request
2021-03-09 14:23:16.437 +03:00 [DBG] No user present in authorize request
2021-03-09 14:23:16.437 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:23:16.438 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:23:16.441 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:23:16.442 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:23:16.443 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"d463110d46c74aca81bca1a6477e8b2e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"d463110d46c74aca81bca1a6477e8b2e","code_challenge":"uiZ2NoOuabE6-pAyoi6xqXUbQSur_qlDvmqDZjkiFZA","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:16.453 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:23:16.494 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-09 14:23:39.233 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:23:39.236 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:23:39.237 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:23:39.238 +03:00 [DBG] Start discovery request
2021-03-09 14:23:39.249 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:23:39.250 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:23:39.251 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:23:39.252 +03:00 [DBG] Start authorize request
2021-03-09 14:23:39.253 +03:00 [DBG] No user present in authorize request
2021-03-09 14:23:39.253 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:23:39.254 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:23:39.255 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:23:39.256 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:23:39.257 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"1e67ff230e014fe195ed171cc11b65b6","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"1e67ff230e014fe195ed171cc11b65b6","code_challenge":"6L_i182nLlR6NMfpzA4dr2kGu4yGRkJzAp9_Jwg9l2E","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:39.266 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:23:39.267 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:23:39.268 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"1e67ff230e014fe195ed171cc11b65b6","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"1e67ff230e014fe195ed171cc11b65b6","code_challenge":"6L_i182nLlR6NMfpzA4dr2kGu4yGRkJzAp9_Jwg9l2E","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:39.274 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TMTCKKVO:0000002D","TimeStamp":"2021-03-09T11:23:39.0000000Z","ProcessId":19152,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:23:39.442 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:23:39.445 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:23:39.446 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:23:39.447 +03:00 [DBG] Start authorize request
2021-03-09 14:23:39.448 +03:00 [DBG] No user present in authorize request
2021-03-09 14:23:39.449 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:23:39.450 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:23:39.452 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:23:39.453 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:23:39.454 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"133197ee4cab4e4fa60a0c01c26de27f","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"133197ee4cab4e4fa60a0c01c26de27f","code_challenge":"P2G1ELk6UmOAr3iHELeXIa5KUxxc2hLNca7F1ExN0Cs","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:39.463 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:23:39.464 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:23:39.465 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"133197ee4cab4e4fa60a0c01c26de27f","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"133197ee4cab4e4fa60a0c01c26de27f","code_challenge":"P2G1ELk6UmOAr3iHELeXIa5KUxxc2hLNca7F1ExN0Cs","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:39.477 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TMTCKKVO:00000035","TimeStamp":"2021-03-09T11:23:39.0000000Z","ProcessId":19152,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:23:39.543 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:23:39.546 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:23:39.548 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:23:39.549 +03:00 [DBG] Start authorize request
2021-03-09 14:23:39.550 +03:00 [DBG] No user present in authorize request
2021-03-09 14:23:39.550 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:23:39.551 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:23:39.553 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:23:39.554 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:23:39.555 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"83573a42f9304cdba8cfa9e20334b2b2","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"83573a42f9304cdba8cfa9e20334b2b2","code_challenge":"dFaiyCIzi2XLTYZu0zVCxWlhREZyu4566XnHb5aApko","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:39.562 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:23:39.577 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-09 14:23:51.203 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:23:51.209 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:23:51.210 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:23:51.211 +03:00 [DBG] Start discovery request
2021-03-09 14:23:51.222 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:23:51.223 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:23:51.224 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:23:51.225 +03:00 [DBG] Start authorize request
2021-03-09 14:23:51.226 +03:00 [DBG] No user present in authorize request
2021-03-09 14:23:51.226 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:23:51.227 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:23:51.228 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:23:51.228 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:23:51.229 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"0232d77b54424488ab18c95306d47f83","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"0232d77b54424488ab18c95306d47f83","code_challenge":"5lfCNG_7HmNuqZyyTxIhf-s6dWL88y3WFLZsmOaA4As","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:51.241 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:23:51.242 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:23:51.243 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"0232d77b54424488ab18c95306d47f83","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"0232d77b54424488ab18c95306d47f83","code_challenge":"5lfCNG_7HmNuqZyyTxIhf-s6dWL88y3WFLZsmOaA4As","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:51.251 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TMTCKKVO:0000004D","TimeStamp":"2021-03-09T11:23:51.0000000Z","ProcessId":19152,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:23:51.429 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:23:51.435 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:23:51.436 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:23:51.438 +03:00 [DBG] Start authorize request
2021-03-09 14:23:51.439 +03:00 [DBG] No user present in authorize request
2021-03-09 14:23:51.440 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:23:51.441 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:23:51.443 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:23:51.445 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:23:51.448 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"84e96d8587d14848b9d762e09f93e6ba","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"84e96d8587d14848b9d762e09f93e6ba","code_challenge":"QsDyrsAn1mQxLmm4uOwa6agSxpYSX68YMJpM7TKw5JQ","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:51.456 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:23:51.457 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:23:51.463 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"84e96d8587d14848b9d762e09f93e6ba","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"84e96d8587d14848b9d762e09f93e6ba","code_challenge":"QsDyrsAn1mQxLmm4uOwa6agSxpYSX68YMJpM7TKw5JQ","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:51.471 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TMTCKKVO:00000055","TimeStamp":"2021-03-09T11:23:51.0000000Z","ProcessId":19152,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:23:51.544 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:23:51.549 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:23:51.550 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:23:51.553 +03:00 [DBG] Start authorize request
2021-03-09 14:23:51.554 +03:00 [DBG] No user present in authorize request
2021-03-09 14:23:51.555 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:23:51.556 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:23:51.557 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:23:51.558 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:23:51.559 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"29f1620f4c0b49de9fbe7db03d335db0","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"29f1620f4c0b49de9fbe7db03d335db0","code_challenge":"3KKcH7fo4hDhpuC5bzuULvUbisbC0Wvm5kgGZkGQRTI","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:23:51.568 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:23:51.580 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-09 14:24:03.412 +03:00 [INF] Application is shutting down...
2021-03-09 14:28:59.934 +03:00 [INF] Starting host...
2021-03-09 14:29:04.769 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 14:29:04.893 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 14:29:04.894 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 14:29:04.894 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 14:29:04.894 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 14:29:04.895 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 14:29:04.895 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 14:29:05.014 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 14:29:05.015 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 14:29:05.016 +03:00 [INF] Hosting environment: Development
2021-03-09 14:29:05.017 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 14:29:06.808 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 14:29:06.810 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 14:29:06.812 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 14:29:06.812 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 14:29:06.813 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 14:29:06.814 +03:00 [DBG] Error Url: /Home
2021-03-09 14:29:06.814 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 14:29:06.919 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:29:06.923 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:29:06.924 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:29:06.926 +03:00 [DBG] Start discovery request
2021-03-09 14:29:06.966 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:29:06.971 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:29:06.972 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:29:06.974 +03:00 [DBG] Start authorize request
2021-03-09 14:29:06.977 +03:00 [DBG] No user present in authorize request
2021-03-09 14:29:06.980 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:29:06.988 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:29:06.997 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:29:07.015 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:29:07.025 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"e6af43dab70d4e43a8f66dc227e7f081","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"e6af43dab70d4e43a8f66dc227e7f081","code_challenge":"NmN6wc6wlqZ4_9jHIR9Mb8rXjssT-eG5EZuVXLZ_Shs","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:29:07.041 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:29:07.042 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:29:07.044 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"e6af43dab70d4e43a8f66dc227e7f081","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"e6af43dab70d4e43a8f66dc227e7f081","code_challenge":"NmN6wc6wlqZ4_9jHIR9Mb8rXjssT-eG5EZuVXLZ_Shs","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:29:07.059 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TQ5VNSC0:0000000F","TimeStamp":"2021-03-09T11:29:07.0000000Z","ProcessId":18300,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:29:07.241 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:29:07.244 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:29:07.244 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:29:07.246 +03:00 [DBG] Start authorize request
2021-03-09 14:29:07.247 +03:00 [DBG] No user present in authorize request
2021-03-09 14:29:07.248 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:29:07.249 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:29:07.250 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:29:07.251 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:29:07.253 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"b0e84bbc58e644c89c7fcaf6cf9f436e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"b0e84bbc58e644c89c7fcaf6cf9f436e","code_challenge":"kjzhvlJw779FararJg33NUz1Ilv05mfjHqdOSafHXvU","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:29:07.262 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:29:07.262 +03:00 [INF] Changing response to LoginRequired: prompt=none was requested
2021-03-09 14:29:07.264 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"b0e84bbc58e644c89c7fcaf6cf9f436e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"b0e84bbc58e644c89c7fcaf6cf9f436e","code_challenge":"kjzhvlJw779FararJg33NUz1Ilv05mfjHqdOSafHXvU","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:29:07.278 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM72TQ5VNSC0:00000017","TimeStamp":"2021-03-09T11:29:07.0000000Z","ProcessId":18300,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-09 14:29:07.349 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:29:07.371 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:29:07.372 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:29:07.374 +03:00 [DBG] Start authorize request
2021-03-09 14:29:07.375 +03:00 [DBG] No user present in authorize request
2021-03-09 14:29:07.375 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:29:07.377 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:29:07.381 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:29:07.382 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:29:07.383 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"a7e3f6fde79c402eadc48aae8607c03a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"a7e3f6fde79c402eadc48aae8607c03a","code_challenge":"tMJvzJ3l5OEdoAbBFj_NdDYWBX5AioaSn5hJWYu2OpM","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:29:07.390 +03:00 [INF] Showing login: User is not authenticated
2021-03-09 14:29:07.430 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-09 14:29:37.852 +03:00 [DBG] Augmenting SignInContext
2021-03-09 14:29:37.853 +03:00 [DBG] Adding idp claim with value: local
2021-03-09 14:29:37.854 +03:00 [DBG] Adding auth_time claim with value: 1615289377
2021-03-09 14:29:37.858 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-09 14:29:37.860 +03:00 [INF] User logged in.
2021-03-09 14:29:37.871 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-09 14:29:37.873 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-09 14:29:37.875 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-09 14:29:37.878 +03:00 [DBG] Start authorize callback request
2021-03-09 14:29:37.880 +03:00 [DBG] User in authorize request: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:29:37.884 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:29:37.885 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:29:37.887 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:29:37.888 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:29:37.889 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"a7e3f6fde79c402eadc48aae8607c03a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"6E3698B6DB17E318837809D8AA74FA2E","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"a7e3f6fde79c402eadc48aae8607c03a","code_challenge":"tMJvzJ3l5OEdoAbBFj_NdDYWBX5AioaSn5hJWYu2OpM","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:29:38.503 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-09 14:29:38.506 +03:00 [DBG] Creating Authorization Code Flow response.
2021-03-09 14:29:39.131 +03:00 [DBG] q5AEFOWrLKEB8apRUDx8onAo2Swso7asjG+zzz2N47I= not found in database
2021-03-09 14:29:39.936 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****3945","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72TQ5VNSC0:00000025","TimeStamp":"2021-03-09T11:29:39.0000000Z","ProcessId":18300,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:29:39.946 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ClientId":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","State":"a7e3f6fde79c402eadc48aae8607c03a","Scope":"Redpier.WebUI.ServerAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-09 14:29:39.950 +03:00 [DBG] Augmenting SignInContext
2021-03-09 14:29:39.950 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-09 14:29:41.363 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:29:41.366 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:29:41.370 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:29:41.371 +03:00 [DBG] Start discovery request
2021-03-09 14:29:41.380 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 14:29:41.383 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 14:29:41.383 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 14:29:41.387 +03:00 [DBG] Start token request.
2021-03-09 14:29:41.389 +03:00 [DBG] Start client validation
2021-03-09 14:29:41.392 +03:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 14:29:41.393 +03:00 [DBG] Start parsing for secret in post body
2021-03-09 14:29:41.394 +03:00 [DBG] client id without secret found
2021-03-09 14:29:41.395 +03:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 14:29:41.395 +03:00 [DBG] Secret id found: Redpier.WebUI.Client
2021-03-09 14:29:41.396 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:29:41.397 +03:00 [DBG] Public Client - skipping secret validation success
2021-03-09 14:29:41.398 +03:00 [DBG] Client validation success
2021-03-09 14:29:41.399 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM72TQ5VNSC0:00000033","TimeStamp":"2021-03-09T11:29:41.0000000Z","ProcessId":18300,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-09 14:29:41.404 +03:00 [DBG] Start token request validation
2021-03-09 14:29:41.407 +03:00 [DBG] Start validation of authorization code token request
2021-03-09 14:29:42.090 +03:00 [DBG] q5AEFOWrLKEB8apRUDx8onAo2Swso7asjG+zzz2N47I= found in database: true
2021-03-09 14:29:42.652 +03:00 [DBG] removing q5AEFOWrLKEB8apRUDx8onAo2Swso7asjG+zzz2N47I= persisted grant from database
2021-03-09 14:29:43.209 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-09 14:29:43.756 +03:00 [DBG] Validation of authorization code token request success
2021-03-09 14:29:43.759 +03:00 [INF] Token request validation success, {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"C0FC8FA3A74A10E172E99A9AADD80E59F73F076D980095EBD68764F19ABE3945","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Redpier.WebUI.Client","code":"C0FC8FA3A74A10E172E99A9AADD80E59F73F076D980095EBD68764F19ABE3945","redirect_uri":"https://localhost:5000/authentication/login-callback","code_verifier":"de85743acad547519059148bfbd539677978f554153b436f8154737bf40b28201e2873a9c5d74ac79c7192fb47fd01e1","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-09 14:29:43.768 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:29:43.778 +03:00 [DBG] Getting claims for access token for client: Redpier.WebUI.Client
2021-03-09 14:29:43.779 +03:00 [DBG] Getting claims for access token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:29:46.099 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:29:46.105 +03:00 [DBG] Getting claims for identity token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6 and client: Redpier.WebUI.Client
2021-03-09 14:29:46.106 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-09 14:29:46.110 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****knmw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****qFGg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72TQ5VNSC0:00000033","TimeStamp":"2021-03-09T11:29:46.0000000Z","ProcessId":18300,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:29:46.120 +03:00 [DBG] Token request success.
2021-03-09 14:29:46.196 +03:00 [INF] Successfully validated the token.
2021-03-09 14:29:46.198 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-09 14:29:46.199 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-09 14:29:46.201 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-09 14:29:46.204 +03:00 [DBG] Start userinfo request
2021-03-09 14:29:46.206 +03:00 [DBG] Bearer token found in header
2021-03-09 14:29:46.214 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:29:46.216 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:29:46.799 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 14:29:46.802 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"E3F0D2BE89F819E422B06BC3E1888030","Claims":{"nbf":1615289386,"exp":1615292986,"iss":"https://localhost:5000","aud":"Redpier.WebUI.ServerAPI","client_id":"Redpier.WebUI.Client","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615289377,"idp":"local","jti":"E3F0D2BE89F819E422B06BC3E1888030","sid":"6E3698B6DB17E318837809D8AA74FA2E","iat":1615289386,"scope":["Redpier.WebUI.ServerAPI","openid","profile"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 14:29:46.812 +03:00 [DBG] Creating userinfo response
2021-03-09 14:29:46.813 +03:00 [DBG] Scopes in access token: Redpier.WebUI.ServerAPI openid profile
2021-03-09 14:29:46.817 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2021-03-09 14:29:49.082 +03:00 [INF] Profile service returned the following claim types: sub preferred_username name
2021-03-09 14:29:49.083 +03:00 [DBG] End userinfo request
2021-03-09 14:29:49.099 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-09 14:29:49.101 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-09 14:29:49.102 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-09 14:29:49.105 +03:00 [DBG] Rendering check session result
2021-03-09 14:46:34.085 +03:00 [INF] Starting host...
2021-03-09 14:46:39.399 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 14:46:39.529 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 14:46:39.529 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 14:46:39.531 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 14:46:39.532 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 14:46:39.533 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 14:46:39.533 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 14:46:39.660 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 14:46:39.660 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 14:46:39.661 +03:00 [INF] Hosting environment: Development
2021-03-09 14:46:39.662 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 14:46:40.044 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 14:46:40.046 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 14:46:40.049 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 14:46:40.050 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 14:46:40.050 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 14:46:40.051 +03:00 [DBG] Error Url: /Home
2021-03-09 14:46:40.051 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 14:46:41.651 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:46:41.654 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:46:41.655 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:46:41.657 +03:00 [DBG] Start discovery request
2021-03-09 14:46:41.695 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:46:41.700 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:46:41.701 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:46:41.703 +03:00 [DBG] Start authorize request
2021-03-09 14:46:41.707 +03:00 [DBG] User in authorize request: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:46:41.709 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:46:41.719 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:46:41.729 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:46:41.745 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:46:41.756 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"c84895a676be460aa1ec586acc0f01f3","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"6E3698B6DB17E318837809D8AA74FA2E","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"c84895a676be460aa1ec586acc0f01f3","code_challenge":"G5qLyIjDDIDbZ6Yty0vp98fGSxQ4TcFNcd0T5ksoewY","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:46:42.516 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-09 14:46:42.518 +03:00 [DBG] Creating Authorization Code Flow response.
2021-03-09 14:46:43.224 +03:00 [DBG] rkji8NG3HneAuMTUdqaLw6pFdflyZxXlUx5JZ4SFVAU= not found in database
2021-03-09 14:46:44.117 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****2F41","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72U408U6IP:0000001B","TimeStamp":"2021-03-09T11:46:44.0000000Z","ProcessId":8852,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:46:44.125 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ClientId":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","State":"c84895a676be460aa1ec586acc0f01f3","Scope":"Redpier.WebUI.ServerAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-09 14:46:44.213 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 14:46:44.216 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 14:46:44.217 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 14:46:44.220 +03:00 [DBG] Start token request.
2021-03-09 14:46:44.222 +03:00 [DBG] Start client validation
2021-03-09 14:46:44.225 +03:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 14:46:44.227 +03:00 [DBG] Start parsing for secret in post body
2021-03-09 14:46:44.229 +03:00 [DBG] client id without secret found
2021-03-09 14:46:44.230 +03:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 14:46:44.230 +03:00 [DBG] Secret id found: Redpier.WebUI.Client
2021-03-09 14:46:44.231 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:46:44.232 +03:00 [DBG] Public Client - skipping secret validation success
2021-03-09 14:46:44.232 +03:00 [DBG] Client validation success
2021-03-09 14:46:44.234 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM72U408U6IP:00000023","TimeStamp":"2021-03-09T11:46:44.0000000Z","ProcessId":8852,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-09 14:46:44.238 +03:00 [DBG] Start token request validation
2021-03-09 14:46:44.243 +03:00 [DBG] Start validation of authorization code token request
2021-03-09 14:46:44.823 +03:00 [DBG] rkji8NG3HneAuMTUdqaLw6pFdflyZxXlUx5JZ4SFVAU= found in database: true
2021-03-09 14:46:45.456 +03:00 [DBG] removing rkji8NG3HneAuMTUdqaLw6pFdflyZxXlUx5JZ4SFVAU= persisted grant from database
2021-03-09 14:46:46.061 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-09 14:46:46.648 +03:00 [DBG] Validation of authorization code token request success
2021-03-09 14:46:46.650 +03:00 [INF] Token request validation success, {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"A31022D738F8EA0E0E383D560C3ABDFA9B4A4714A0D6DDA793AB7C2DEE102F41","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Redpier.WebUI.Client","code":"A31022D738F8EA0E0E383D560C3ABDFA9B4A4714A0D6DDA793AB7C2DEE102F41","redirect_uri":"https://localhost:5000/authentication/login-callback","code_verifier":"933a0869e7d741e8bbd1511f3f36adb8b341902849a64a37a7dd427d409a77d12f4f41e005db47f0ac686835578e7b85","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-09 14:46:46.659 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:46:46.669 +03:00 [DBG] Getting claims for access token for client: Redpier.WebUI.Client
2021-03-09 14:46:46.669 +03:00 [DBG] Getting claims for access token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:46:49.070 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:46:49.075 +03:00 [DBG] Getting claims for identity token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6 and client: Redpier.WebUI.Client
2021-03-09 14:46:49.077 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-09 14:46:49.080 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****DA8w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****eBWg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72U408U6IP:00000023","TimeStamp":"2021-03-09T11:46:49.0000000Z","ProcessId":8852,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:46:49.087 +03:00 [DBG] Token request success.
2021-03-09 14:46:49.160 +03:00 [INF] Successfully validated the token.
2021-03-09 14:46:49.163 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-09 14:46:49.165 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-09 14:46:49.166 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-09 14:46:49.169 +03:00 [DBG] Start userinfo request
2021-03-09 14:46:49.171 +03:00 [DBG] Bearer token found in header
2021-03-09 14:46:49.178 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:46:49.180 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:46:50.014 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 14:46:50.016 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"6AF10DBE2B391012D498A40028DBB226","Claims":{"nbf":1615290408,"exp":1615294008,"iss":"https://localhost:5000","aud":"Redpier.WebUI.ServerAPI","client_id":"Redpier.WebUI.Client","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615289377,"idp":"local","jti":"6AF10DBE2B391012D498A40028DBB226","sid":"6E3698B6DB17E318837809D8AA74FA2E","iat":1615290408,"scope":["Redpier.WebUI.ServerAPI","openid","profile"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 14:46:50.024 +03:00 [DBG] Creating userinfo response
2021-03-09 14:46:50.027 +03:00 [DBG] Scopes in access token: Redpier.WebUI.ServerAPI openid profile
2021-03-09 14:46:50.029 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2021-03-09 14:46:53.335 +03:00 [INF] Profile service returned the following claim types: sub preferred_username name
2021-03-09 14:46:53.337 +03:00 [DBG] End userinfo request
2021-03-09 14:46:53.354 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-09 14:46:53.356 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-09 14:46:53.359 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-09 14:46:53.361 +03:00 [DBG] Rendering check session result
2021-03-09 14:47:00.013 +03:00 [INF] Successfully validated the token.
2021-03-09 14:47:00.949 +03:00 [INF] Successfully validated the token.
2021-03-09 14:47:01.937 +03:00 [INF] Successfully validated the token.
2021-03-09 14:47:02.949 +03:00 [INF] Successfully validated the token.
2021-03-09 14:47:03.957 +03:00 [INF] Successfully validated the token.
2021-03-09 14:47:04.953 +03:00 [INF] Successfully validated the token.
2021-03-09 14:49:25.707 +03:00 [INF] Starting host...
2021-03-09 14:49:31.662 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 14:49:31.886 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 14:49:31.886 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 14:49:31.887 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 14:49:31.887 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 14:49:31.887 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 14:49:31.889 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 14:49:32.127 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 14:49:32.127 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 14:49:32.127 +03:00 [INF] Hosting environment: Development
2021-03-09 14:49:32.128 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 14:49:34.558 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 14:49:34.560 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 14:49:34.560 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 14:49:34.560 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 14:49:34.561 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 14:49:34.561 +03:00 [DBG] Error Url: /Home
2021-03-09 14:49:34.562 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 14:49:34.712 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:49:34.715 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:49:34.716 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:49:34.719 +03:00 [DBG] Start discovery request
2021-03-09 14:49:34.776 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:49:34.780 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:49:34.782 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:49:34.787 +03:00 [DBG] Start authorize request
2021-03-09 14:49:34.799 +03:00 [DBG] User in authorize request: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:49:34.808 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:49:34.818 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:49:34.827 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:49:34.848 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:49:34.861 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"b095f2b5e2cd49159bd3d937f9668808","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"6E3698B6DB17E318837809D8AA74FA2E","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"b095f2b5e2cd49159bd3d937f9668808","code_challenge":"MnMA0pjyvDEDluanOdWZDTJmNNH5dERJRistNJN8sDg","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:49:35.695 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-09 14:49:35.698 +03:00 [DBG] Creating Authorization Code Flow response.
2021-03-09 14:49:36.464 +03:00 [DBG] 7BUTc654+skLumazEmhd6qxY2xFQw6Ty7PgQQ5D/KQ0= not found in database
2021-03-09 14:49:37.403 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****1E98","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72U5JPKEAT:0000000B","TimeStamp":"2021-03-09T11:49:37.0000000Z","ProcessId":11948,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:49:37.416 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ClientId":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","State":"b095f2b5e2cd49159bd3d937f9668808","Scope":"Redpier.WebUI.ServerAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-09 14:49:37.530 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 14:49:37.533 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 14:49:37.534 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 14:49:37.537 +03:00 [DBG] Start token request.
2021-03-09 14:49:37.539 +03:00 [DBG] Start client validation
2021-03-09 14:49:37.543 +03:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 14:49:37.545 +03:00 [DBG] Start parsing for secret in post body
2021-03-09 14:49:37.549 +03:00 [DBG] client id without secret found
2021-03-09 14:49:37.549 +03:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 14:49:37.550 +03:00 [DBG] Secret id found: Redpier.WebUI.Client
2021-03-09 14:49:37.550 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:49:37.551 +03:00 [DBG] Public Client - skipping secret validation success
2021-03-09 14:49:37.551 +03:00 [DBG] Client validation success
2021-03-09 14:49:37.553 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM72U5JPKEAT:00000013","TimeStamp":"2021-03-09T11:49:37.0000000Z","ProcessId":11948,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-09 14:49:37.557 +03:00 [DBG] Start token request validation
2021-03-09 14:49:37.561 +03:00 [DBG] Start validation of authorization code token request
2021-03-09 14:49:38.212 +03:00 [DBG] 7BUTc654+skLumazEmhd6qxY2xFQw6Ty7PgQQ5D/KQ0= found in database: true
2021-03-09 14:49:38.835 +03:00 [DBG] removing 7BUTc654+skLumazEmhd6qxY2xFQw6Ty7PgQQ5D/KQ0= persisted grant from database
2021-03-09 14:49:39.461 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-09 14:49:40.050 +03:00 [DBG] Validation of authorization code token request success
2021-03-09 14:49:40.053 +03:00 [INF] Token request validation success, {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"BECB8E6C5C280B9B807412D86A3684A39162BF8A9C9120BCBD6CC9A9987B1E98","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Redpier.WebUI.Client","code":"BECB8E6C5C280B9B807412D86A3684A39162BF8A9C9120BCBD6CC9A9987B1E98","redirect_uri":"https://localhost:5000/authentication/login-callback","code_verifier":"febfe51a28584fdcb5db5b7201b4ccac3228d30c205f4d979711c60035a1b2b49b191582139a44d6984f7412cdfcee0e","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-09 14:49:40.062 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:49:40.074 +03:00 [DBG] Getting claims for access token for client: Redpier.WebUI.Client
2021-03-09 14:49:40.075 +03:00 [DBG] Getting claims for access token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:49:42.699 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:49:42.706 +03:00 [DBG] Getting claims for identity token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6 and client: Redpier.WebUI.Client
2021-03-09 14:49:42.707 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-09 14:49:42.709 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****Xd-A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****qKYw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72U5JPKEAT:00000013","TimeStamp":"2021-03-09T11:49:42.0000000Z","ProcessId":11948,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:49:42.714 +03:00 [DBG] Token request success.
2021-03-09 14:49:42.795 +03:00 [INF] Successfully validated the token.
2021-03-09 14:49:42.797 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-09 14:49:42.798 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-09 14:49:42.800 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-09 14:49:42.805 +03:00 [DBG] Start userinfo request
2021-03-09 14:49:42.807 +03:00 [DBG] Bearer token found in header
2021-03-09 14:49:42.815 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:49:42.817 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:49:43.433 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 14:49:43.436 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"7F6B4711DD528A1E4CFF49AA75DCED02","Claims":{"nbf":1615290582,"exp":1615294182,"iss":"https://localhost:5000","aud":"Redpier.WebUI.ServerAPI","client_id":"Redpier.WebUI.Client","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615289377,"idp":"local","jti":"7F6B4711DD528A1E4CFF49AA75DCED02","sid":"6E3698B6DB17E318837809D8AA74FA2E","iat":1615290582,"scope":["Redpier.WebUI.ServerAPI","openid","profile"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 14:49:43.443 +03:00 [DBG] Creating userinfo response
2021-03-09 14:49:43.444 +03:00 [DBG] Scopes in access token: Redpier.WebUI.ServerAPI openid profile
2021-03-09 14:49:43.447 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2021-03-09 14:49:45.860 +03:00 [INF] Profile service returned the following claim types: sub preferred_username name
2021-03-09 14:49:45.863 +03:00 [DBG] End userinfo request
2021-03-09 14:49:45.879 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-09 14:49:45.880 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-09 14:49:45.881 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-09 14:49:45.882 +03:00 [DBG] Rendering check session result
2021-03-09 14:51:51.221 +03:00 [INF] Starting host...
2021-03-09 14:51:56.490 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 14:51:56.619 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 14:51:56.620 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 14:51:56.620 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 14:51:56.620 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 14:51:56.620 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 14:51:56.621 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 14:51:56.741 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 14:51:56.742 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 14:51:56.742 +03:00 [INF] Hosting environment: Development
2021-03-09 14:51:56.743 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 14:51:58.575 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 14:51:58.577 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 14:51:58.578 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 14:51:58.578 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 14:51:58.579 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 14:51:58.579 +03:00 [DBG] Error Url: /Home
2021-03-09 14:51:58.580 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 14:51:58.686 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:51:58.690 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:51:58.692 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:51:58.694 +03:00 [DBG] Start discovery request
2021-03-09 14:51:58.745 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:51:58.752 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:51:58.752 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:51:58.755 +03:00 [DBG] Start authorize request
2021-03-09 14:51:58.759 +03:00 [DBG] User in authorize request: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:51:58.763 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:51:58.772 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:51:58.780 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:51:58.796 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:51:58.808 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"c4b3be3893da49f2b45acdc7b761ac0e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"6E3698B6DB17E318837809D8AA74FA2E","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"c4b3be3893da49f2b45acdc7b761ac0e","code_challenge":"dqNaX2B-yyrBulas1JaR9WKnKQcT3h9nIvH6dtzIlNQ","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:51:59.666 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-09 14:51:59.668 +03:00 [DBG] Creating Authorization Code Flow response.
2021-03-09 14:52:00.465 +03:00 [DBG] ufGgIrI2DANqEEgbd1Ju/ON+/c/e72a2eAU3SCaj/Zg= not found in database
2021-03-09 14:52:01.421 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****1B63","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72U6UQC2NV:0000000B","TimeStamp":"2021-03-09T11:52:01.0000000Z","ProcessId":13160,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:52:01.428 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ClientId":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","State":"c4b3be3893da49f2b45acdc7b761ac0e","Scope":"Redpier.WebUI.ServerAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-09 14:52:01.519 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 14:52:01.522 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 14:52:01.523 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 14:52:01.526 +03:00 [DBG] Start token request.
2021-03-09 14:52:01.530 +03:00 [DBG] Start client validation
2021-03-09 14:52:01.533 +03:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 14:52:01.534 +03:00 [DBG] Start parsing for secret in post body
2021-03-09 14:52:01.537 +03:00 [DBG] client id without secret found
2021-03-09 14:52:01.537 +03:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 14:52:01.537 +03:00 [DBG] Secret id found: Redpier.WebUI.Client
2021-03-09 14:52:01.538 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:52:01.539 +03:00 [DBG] Public Client - skipping secret validation success
2021-03-09 14:52:01.540 +03:00 [DBG] Client validation success
2021-03-09 14:52:01.542 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM72U6UQC2NV:00000013","TimeStamp":"2021-03-09T11:52:01.0000000Z","ProcessId":13160,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-09 14:52:01.548 +03:00 [DBG] Start token request validation
2021-03-09 14:52:01.551 +03:00 [DBG] Start validation of authorization code token request
2021-03-09 14:52:02.272 +03:00 [DBG] ufGgIrI2DANqEEgbd1Ju/ON+/c/e72a2eAU3SCaj/Zg= found in database: true
2021-03-09 14:52:03.004 +03:00 [DBG] removing ufGgIrI2DANqEEgbd1Ju/ON+/c/e72a2eAU3SCaj/Zg= persisted grant from database
2021-03-09 14:52:03.728 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-09 14:52:04.432 +03:00 [DBG] Validation of authorization code token request success
2021-03-09 14:52:04.434 +03:00 [INF] Token request validation success, {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"4E27A7520F63867924E00CBEB906EE645244E778557DD8B4570E89EA3FE61B63","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Redpier.WebUI.Client","code":"4E27A7520F63867924E00CBEB906EE645244E778557DD8B4570E89EA3FE61B63","redirect_uri":"https://localhost:5000/authentication/login-callback","code_verifier":"aa75aa85f26c486ea599d3f713b955df04d7e93ec8fc475380bd6e1176888b2094056e93adde4572acfb19e46e03d8e2","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-09 14:52:04.443 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:52:04.456 +03:00 [DBG] Getting claims for access token for client: Redpier.WebUI.Client
2021-03-09 14:52:04.456 +03:00 [DBG] Getting claims for access token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:52:07.451 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:52:07.456 +03:00 [DBG] Getting claims for identity token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6 and client: Redpier.WebUI.Client
2021-03-09 14:52:07.457 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-09 14:52:07.460 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****NJPg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7qrQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72U6UQC2NV:00000013","TimeStamp":"2021-03-09T11:52:07.0000000Z","ProcessId":13160,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:52:07.468 +03:00 [DBG] Token request success.
2021-03-09 14:52:07.546 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:07.547 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-09 14:52:07.549 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-09 14:52:07.550 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-09 14:52:07.554 +03:00 [DBG] Start userinfo request
2021-03-09 14:52:07.556 +03:00 [DBG] Bearer token found in header
2021-03-09 14:52:07.562 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:52:07.564 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:52:08.412 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 14:52:08.416 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"0A63A84713716BE23EA774B2D183BCA3","Claims":{"nbf":1615290727,"exp":1615294327,"iss":"https://localhost:5000","aud":"Redpier.WebUI.ServerAPI","client_id":"Redpier.WebUI.Client","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615289377,"idp":"local","jti":"0A63A84713716BE23EA774B2D183BCA3","sid":"6E3698B6DB17E318837809D8AA74FA2E","iat":1615290727,"scope":["Redpier.WebUI.ServerAPI","openid","profile"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 14:52:08.425 +03:00 [DBG] Creating userinfo response
2021-03-09 14:52:08.427 +03:00 [DBG] Scopes in access token: Redpier.WebUI.ServerAPI openid profile
2021-03-09 14:52:08.431 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2021-03-09 14:52:11.344 +03:00 [INF] Profile service returned the following claim types: sub preferred_username name
2021-03-09 14:52:11.346 +03:00 [DBG] End userinfo request
2021-03-09 14:52:11.366 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-09 14:52:11.370 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-09 14:52:11.372 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-09 14:52:11.374 +03:00 [DBG] Rendering check session result
2021-03-09 14:52:15.793 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:16.710 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:17.679 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:18.692 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:19.682 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:20.680 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:22.123 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:23.118 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:24.119 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:25.132 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:26.149 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:27.127 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:28.131 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:29.147 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:30.139 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:30.937 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:31.685 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:32.680 +03:00 [INF] Successfully validated the token.
2021-03-09 14:52:35.592 +03:00 [INF] Application is shutting down...
2021-03-09 14:55:26.930 +03:00 [INF] Starting host...
2021-03-09 14:55:32.346 +03:00 [INF] Starting IdentityServer4 version 4.1.0+5a4433f83e8c6fca7d8979141fa5a92684ad56f6
2021-03-09 14:55:32.480 +03:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2021-03-09 14:55:32.481 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2021-03-09 14:55:32.481 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-09 14:55:32.482 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-09 14:55:32.482 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2021-03-09 14:55:32.482 +03:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2021-03-09 14:55:32.604 +03:00 [INF] Now listening on: https://localhost:5000
2021-03-09 14:55:32.604 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-03-09 14:55:32.605 +03:00 [INF] Hosting environment: Development
2021-03-09 14:55:32.606 +03:00 [INF] Content root path: C:\Users\Furkan\source\repos\redpier\src\Redpier.WebUI\Server
2021-03-09 14:55:34.242 +03:00 [DBG] Login Url: /Identity/Account/Login
2021-03-09 14:55:34.243 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 14:55:34.245 +03:00 [DBG] Logout Url: /Identity/Account/Logout
2021-03-09 14:55:34.246 +03:00 [DBG] ConsentUrl Url: /consent
2021-03-09 14:55:34.246 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 14:55:34.247 +03:00 [DBG] Error Url: /Home
2021-03-09 14:55:34.250 +03:00 [DBG] Error Id Parameter: errorId
2021-03-09 14:55:34.375 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-09 14:55:34.379 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-09 14:55:34.381 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-09 14:55:34.383 +03:00 [DBG] Start discovery request
2021-03-09 14:55:34.430 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-09 14:55:34.435 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-09 14:55:34.436 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-09 14:55:34.438 +03:00 [DBG] Start authorize request
2021-03-09 14:55:34.444 +03:00 [DBG] User in authorize request: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:55:34.446 +03:00 [DBG] Start authorize request protocol validation
2021-03-09 14:55:34.454 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:55:34.466 +03:00 [DBG] Checking for PKCE parameters
2021-03-09 14:55:34.483 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-09 14:55:34.495 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"Redpier.WebUI.ServerAPI openid profile","State":"7a28d620a2c84fb882f5e5d6a2322593","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"6E3698B6DB17E318837809D8AA74FA2E","Raw":{"client_id":"Redpier.WebUI.Client","redirect_uri":"https://localhost:5000/authentication/login-callback","response_type":"code","scope":"Redpier.WebUI.ServerAPI openid profile","state":"7a28d620a2c84fb882f5e5d6a2322593","code_challenge":"5nDm1QCFRoB98TYVwBThuJ1Udda-d9TdF5Jxa_HyNSI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-09 14:55:35.253 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-09 14:55:35.257 +03:00 [DBG] Creating Authorization Code Flow response.
2021-03-09 14:55:35.920 +03:00 [DBG] 3yWTg668lb7rpKzuMPLQAIvn0L1jSEbzwZ8I+B3gSP8= not found in database
2021-03-09 14:55:36.754 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","Endpoint":"Authorize","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****7F9F","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72U8V2TMA0:0000000F","TimeStamp":"2021-03-09T11:55:36.0000000Z","ProcessId":14096,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:55:36.762 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","ClientId":"Redpier.WebUI.Client","RedirectUri":"https://localhost:5000/authentication/login-callback","State":"7a28d620a2c84fb882f5e5d6a2322593","Scope":"Redpier.WebUI.ServerAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-09 14:55:36.852 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 14:55:36.856 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 14:55:36.856 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 14:55:36.861 +03:00 [DBG] Start token request.
2021-03-09 14:55:36.863 +03:00 [DBG] Start client validation
2021-03-09 14:55:36.865 +03:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 14:55:36.867 +03:00 [DBG] Start parsing for secret in post body
2021-03-09 14:55:36.869 +03:00 [DBG] client id without secret found
2021-03-09 14:55:36.869 +03:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 14:55:36.870 +03:00 [DBG] Secret id found: Redpier.WebUI.Client
2021-03-09 14:55:36.870 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:55:36.871 +03:00 [DBG] Public Client - skipping secret validation success
2021-03-09 14:55:36.871 +03:00 [DBG] Client validation success
2021-03-09 14:55:36.873 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM72U8V2TMA0:00000017","TimeStamp":"2021-03-09T11:55:36.0000000Z","ProcessId":14096,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-09 14:55:36.883 +03:00 [DBG] Start token request validation
2021-03-09 14:55:36.886 +03:00 [DBG] Start validation of authorization code token request
2021-03-09 14:55:37.477 +03:00 [DBG] 3yWTg668lb7rpKzuMPLQAIvn0L1jSEbzwZ8I+B3gSP8= found in database: true
2021-03-09 14:55:38.078 +03:00 [DBG] removing 3yWTg668lb7rpKzuMPLQAIvn0L1jSEbzwZ8I+B3gSP8= persisted grant from database
2021-03-09 14:55:38.712 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-09 14:55:39.282 +03:00 [DBG] Validation of authorization code token request success
2021-03-09 14:55:39.285 +03:00 [INF] Token request validation success, {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"E554E21CF03E8D91D2867FAC3A81CF9B00277B10B8505156C051E76D35827F9F","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Redpier.WebUI.Client","code":"E554E21CF03E8D91D2867FAC3A81CF9B00277B10B8505156C051E76D35827F9F","redirect_uri":"https://localhost:5000/authentication/login-callback","code_verifier":"35cb3b8762eb4bc0816e32dd544a2e893c63c37cdde94ee59c97dccb45d39f60e6462e7c3bcf49b69adc320c3a94bc4c","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-09 14:55:39.295 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:55:39.305 +03:00 [DBG] Getting claims for access token for client: Redpier.WebUI.Client
2021-03-09 14:55:39.307 +03:00 [DBG] Getting claims for access token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6
2021-03-09 14:55:41.747 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:55:41.754 +03:00 [DBG] Getting claims for identity token for subject: 8bb70c81-e48e-4481-afc8-6110424558b6 and client: Redpier.WebUI.Client
2021-03-09 14:55:41.755 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-09 14:55:41.759 +03:00 [INF] {"ClientId":"Redpier.WebUI.Client","ClientName":"Redpier.WebUI.Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"8bb70c81-e48e-4481-afc8-6110424558b6","Scopes":"Redpier.WebUI.ServerAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****Mv0Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****0DkA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM72U8V2TMA0:00000017","TimeStamp":"2021-03-09T11:55:41.0000000Z","ProcessId":14096,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-09 14:55:41.764 +03:00 [DBG] Token request success.
2021-03-09 14:55:41.842 +03:00 [INF] Successfully validated the token.
2021-03-09 14:55:41.844 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-09 14:55:41.846 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-09 14:55:41.847 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-09 14:55:41.850 +03:00 [DBG] Start userinfo request
2021-03-09 14:55:41.852 +03:00 [DBG] Bearer token found in header
2021-03-09 14:55:41.858 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:55:41.863 +03:00 [DBG] client configuration validation for client Redpier.WebUI.Client succeeded.
2021-03-09 14:55:42.431 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-09 14:55:42.434 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"255F6949088FC6291FF4E8C44701ACC0","Claims":{"nbf":1615290941,"exp":1615294541,"iss":"https://localhost:5000","aud":"Redpier.WebUI.ServerAPI","client_id":"Redpier.WebUI.Client","sub":"8bb70c81-e48e-4481-afc8-6110424558b6","auth_time":1615289377,"idp":"local","jti":"255F6949088FC6291FF4E8C44701ACC0","sid":"6E3698B6DB17E318837809D8AA74FA2E","iat":1615290941,"scope":["Redpier.WebUI.ServerAPI","openid","profile"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-09 14:55:42.442 +03:00 [DBG] Creating userinfo response
2021-03-09 14:55:42.444 +03:00 [DBG] Scopes in access token: Redpier.WebUI.ServerAPI openid profile
2021-03-09 14:55:42.448 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2021-03-09 14:55:44.721 +03:00 [INF] Profile service returned the following claim types: sub preferred_username name
2021-03-09 14:55:44.722 +03:00 [DBG] End userinfo request
2021-03-09 14:55:44.738 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-09 14:55:44.740 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-09 14:55:44.741 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-09 14:55:44.743 +03:00 [DBG] Rendering check session result
2021-03-09 14:55:46.899 +03:00 [INF] Successfully validated the token.
2021-03-09 14:55:47.820 +03:00 [INF] Successfully validated the token.
2021-03-09 14:55:48.817 +03:00 [INF] Successfully validated the token.
2021-03-09 14:55:49.830 +03:00 [INF] Successfully validated the token.
2021-03-09 14:55:50.819 +03:00 [INF] Successfully validated the token.
2021-03-09 14:55:50.938 +03:00 [INF] Successfully validated the token.
2021-03-09 14:55:51.603 +03:00 [INF] Successfully validated the token.
2021-03-09 14:55:51.824 +03:00 [INF] Successfully validated the token.
2021-03-09 14:55:52.433 +03:00 [INF] Successfully validated the token.
2021-03-09 14:56:06.486 +03:00 [INF] Application is shutting down...
